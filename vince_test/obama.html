
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Four Ways to Slice Obama’s 2013 Budget Proposal - Interactive Feature - NYTimes.com</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="robots" content="noarchive">
<meta name="hdl" content="Four Ways to Slice Obama’s 2013 Budget Proposal">
<meta name="lp" content="Explore every nook and cranny of President Obama’s federal budget proposal.">
<meta name="dat" content="February 13, 2012">
<meta name="DISPLAYDATE" content="February 13, 2012">
<meta name="pdate" content="20120213">
<meta name="col" content="">
<meta name="dsk" content="U.S. / Politics">
<meta name="cre" content="By SHAN CARTER">
<meta name="tom" content="interactive_feature">
<meta name="display-text" content="Interactive Feature">
<meta name="display-name" content="interactive">
<meta name="url_thumb" content="/images/2012/02/13/us/politics/promo-budget-75x75.png">
<meta name="url_thumb_wide" content="/images/2012/02/13/us/politics/promo-budget-190x126.png">
<meta name="ttl" content="">
<meta name="des" content="">
<meta name="per" content="">
<meta name="org" content="">
<meta name="geo" content="">
<meta name="misspelling" content="">
<meta name="keywords" content="">
<meta name="description" content="Explore every nook and cranny of President Obama’s federal budget proposal.">
<meta name="MEDIA_TEMPLATE_VERSION" content="200">
<meta name="CG" content="us">
<meta name="SCG" content="politics">
<meta name="PT" content="Multimedia">
<meta name="PST" content="Interactive">
<meta property="og:type" content="article"/>
<meta property="og:title" content="Four Ways to Slice Obama’s 2013 Budget Proposal"/>
<meta property="og:image" content="http://graphics8.nytimes.com//images/2012/02/13/us/politics/promo-budget-75x75.png"/>
<link rel="image_src" href="http://graphics8.nytimes.com/images/2012/02/13/us/politics/promo-budget-190x126.png">

<link rel="stylesheet" type="text/css" href="http://graphics8.nytimes.com/css/0.1/screen/build/interactive/us/politics/styles.css">
<link rel="stylesheet" type="text/css" media="print" href="http://graphics8.nytimes.com/css/0.1/print/styles.css">
<!--[if IE]>
        <style type="text/css">
            @import url(http://graphics8.nytimes.com/css/0.1/screen/common/ie.css);
        </style>
    <![endif]-->
<!--[if IE 6]>
        <style type="text/css">
            @import url(http://graphics8.nytimes.com/css/0.1/screen/common/ie6.css);
        </style>
    <![endif]-->
<script type="text/javascript" src="http://graphics8.nytimes.com/js/common.js"></script>
<script type="text/javascript" src="http://graphics8.nytimes.com/js/common/screen/DropDown.js"></script>
<script type="text/javascript" src="http://graphics8.nytimes.com/js/fileit.js"></script>
<script type="text/javascript" src="http://graphics8.nytimes.com/js/util/tooltip.js"></script>
<script type="text/javascript" src="http://graphics8.nytimes.com/js/article/articleShare.js"></script>
<script type="text/JavaScript">
        var static_kw = "";
        var dynamic_kw = "";
        var nyt_google_contents = dynamic_kw + static_kw;
        var nyt_google_ad_channel = "us_politics";
    </script>
</head>
<body id="interactiveABC">
<a name="top"></a>
<div id="shell">

<ul id="memberTools">

<!-- ADXINFO classification="Text_Link" campaign="inyt2014_bar1_oct_anniv_usd_4F9KW" priority="9000" isInlineSafe="Y" width="0" height="0" --><!-- INYT Sale Bar1 20140929 ~dj.paris -->
<style>
.NYT5Style .masthead-tools #bar1-singlepanel  {
    display: inline;
    vertical-align: top;
}
#bar1-singlepanel {
    border:none;
    position: relative;
}
.bar1_hover {
    opacity: 0;
}
.sub_small_hide{
    display: none;
}
#bar1-singlepanel > a {
    -moz-box-sizing: border-box;
    background-color: #6288A5;
    border: 1px solid #4D7B9F;
    border-radius: 3px;
    color: #FFFFFF !important;
    display: inline-block;
    font-size: 1em;
    font-weight: bold;
    font-family: nyt-franklin,nyt-franklin-1,'Helvetica Neue',Arial,sans-serif;
    padding: 7px 10px 6px;
    text-transform: uppercase;
    text-decoration: none;
}
#bar1-singlepanel > a:hover {
    background-color: #326891;
    border: 1px solid #265E8B;
    text-decoration: none;
}
#hovercard {
    width: 450px;
    height: 328px;
    display:none;
    margin-left: -360px;
    z-index: 99999999;
    background-color:#fff;
    border: 0;
    position:absolute;
    left: 50%;
    top: 30px;
    text-align:left;
    -moz-box-shadow: 0 0 5px #888;
    -webkit-box-shadow: 0 0 5px #888;
    box-shadow: 0 0 5px #888;
    white-space: normal;
}
#hovercard:after {
        bottom: 100%;
	left: 350px;
	border: solid transparent;
	content: " ";
	width: 0;
	height: 0;
	position: absolute;
	pointer-events: none;
	border-bottom-color: #339999;
	border-width: 8px;
	margin: 0;
}
.NYT5Style #hovercard {
        top: 18px;
}
.NYT5Style #hovercard  a:hover {
  background-color: #414042;
}
/* WEBKIT ONLY RULES */
@media screen and (-webkit-min-device-pixel-ratio:0) {
  #hovercard {
    top: 31px !important;
  }
  .NYT5Style #hovercard {
    top: 28px !important;
    margin-left: -283px;
  }
  .NYT5Style #hovercard:after {
    left: 273px;
  }
}
/* EXCLUDING NYT4 INTERACTIVES */
#interactiveABC #bar1-singlepanel {
   display: none;
}
</style>

<li id="bar1-singlepanel" class="user-subscriptions-menu user-subscriptions-group bar1_hover">
    <a id="nyt-button-sub" class="" href="http://www.nytimes.com/adx/bin/adx_click.html?type=goto&opzn&page=www.nytimes.com/interactive/yr/mo/day/us/politics&pos=Bar1&sn2=c06650d3/a7b87cdd&sn1=9de35e3f/519a0471&camp=inyt2014_bar1_oct_anniv_usd_4F9KW&ad=inyt2014_bar1_oct_anniv_usd&goto=http%3A%2F%2Finternational%2Enytimes%2Ecom%2Fsubscriptions%2Finyt%2Flp8LUQK%2Ehtml%3Fadxc%3D258024%26adxa%3D384187%26page%3Dwww.nytimes.com/interactive/yr/mo/day/us/politics%26pos%3DBar1%26campaignId%3D4F9KW" target="_blank" data-content-collection="inyt2014_bar1_oct_anniv_usd_4F9KW" data-content-placement="1">Subscribe Now</a>

    <div id="hovercard" data-campaign-name="inyt2014_bar1_oct_anniv_usd_4F9KW">
        <a href="http://www.nytimes.com/adx/bin/adx_click.html?type=goto&opzn&page=www.nytimes.com/interactive/yr/mo/day/us/politics&pos=Bar1&sn2=c06650d3/a7b87cdd&sn1=9de35e3f/519a0471&camp=inyt2014_bar1_oct_anniv_usd_4F9KW&ad=inyt2014_bar1_oct_anniv_usd&goto=http%3A%2F%2Finternational%2Enytimes%2Ecom%2Fsubscriptions%2Finyt%2Flp8LUQK%2Ehtml%3Fadxc%3D258024%26adxa%3D384187%26page%3Dwww.nytimes.com/interactive/yr/mo/day/us/politics%26pos%3DBar1%26campaignId%3D4F9KW" target="_blank" data-content-collection="inyt2014_bar1_oct_anniv_usd_4F9KW" data-content-placement="2"><img src="http://graphics8.nytimes.com/adx/images/ADS/38/41/ad.384187/bar1-oct-anniv-sale.jpg" alt=""></a>
    </div>
</li>

<!-- for small viewports -->
<!--[if gt IE 8]><!--><a id="subscribe_small" href="http://www.nytimes.com/adx/bin/adx_click.html?type=goto&opzn&page=www.nytimes.com/interactive/yr/mo/day/us/politics&pos=Bar1&sn2=c06650d3/a7b87cdd&sn1=9de35e3f/519a0471&camp=inyt2014_bar1_oct_anniv_usd_4F9KW&ad=inyt2014_bar1_oct_anniv_usd&goto=http%3A%2F%2Finternational%2Enytimes%2Ecom%2Fsubscriptions%2Finyt%2Flp8LUQK%2Ehtml%3Fadxc%3D258024%26adxa%3D384187%26page%3Dwww.nytimes.com/interactive/yr/mo/day/us/politics%26pos%3DBar1%26campaignId%3D4F9KW" class="subscribe-link sub_small_hide" data-content-collection="inyt2014_bar1_oct_anniv_usd_4F9KW" data-content-placement="1">Subscribe</a><!--<![endif]-->

<script src="http://graphics8.nytimes.com/marketing/ADX/bar1/bar1_et_inyt.js"></script>

<span class="adxInfo" style="display:none;">campaign: inyt2014_bar1_oct_anniv_usd_4F9KW -- 258024, creative: inyt2014_bar1_oct_anniv_usd -- 384187, page: www.nytimes.com/interactive/yr/mo/day/us/politics/2013-budget-proposal-graphic.html, targetedPage: www.nytimes.com/interactive/yr/mo/day/us/politics, position: Bar1</span>

 
                        <li><a id="memberToolsLogin" href="https://myaccount.nytimes.com/auth/login">Log In</a></li>
            <li><a href="https://myaccount.nytimes.com/gst/regi.html" onClick="dcsMultiTrack('WT.z_ract', 'Regnow', 'WT.z_rprod', 'Masthead');">Register Now</a></li>
                            

<li><a href="http://www.nytimes.com/membercenter/sitehelp.html">Help</a></li>
</ul>
<div class="tabsContainer">
<ul id="mainTabs" class="tabs">
<li class="first mainTabHome"><a href="http://www.nytimes.com">Home Page</a></li>
<li class="mainTabTodaysPaper"><a href="http://www.nytimes.com/pages/todayspaper/index.html">Today's Paper</a></li>
<li class="mainTabVideo"><a href="http://www.nytimes.com/video">Video</a></li>
<li class="mainTabMostPopular"><a href="http://www.nytimes.com/mostpopular">Most Popular</a></li>
<li class="mainTabTimesTopics"><a href="http://topics.nytimes.com/top/reference/timestopics">Times Topics</a></li>
</ul>
</div>
<script type="text/javascript">
window.setTimeout(function() {
  var login = document.getElementById('memberToolsLogin');
  if (login) {
    login.href += "?URI=" + window.location.href;
  }
}, 0)
</script>
<div id="page" class="tabContent active">
<div class="clearfix" id="masthead">

<div id="searchWidget">
<div class="inlineSearchControl">
<form enctype="application/x-www-form-urlencoded" action="http://query.nytimes.com/search/sitesearch" method="get" name="searchForm" id="searchForm">
<input type="hidden" value="full" name="date_select"/>
<label for="searchQuery">Search All NYTimes.com</label>
<input type="text" class="text" value="" size="" name="query" id="searchQuery"/>
<input type="hidden" id="searchAll" name="type" value="nyt"/>
<input id="searchSubmit" title="Search" width="22" height="19" alt="Search" type="image" src="http://graphics8.nytimes.com/images/global/buttons/go.gif">
</form>
</div>
</div>
<div id="branding" >

<a href="http://www.nytimes.com"><img src="http://graphics8.nytimes.com/images/misc/nytlogo152x23.gif" alt="New York Times" id="NYTLogo"/></a>

</div>
<div id="date">
<p>
<NYT_DISPLAYDATE></NYT_DISPLAYDATE>
</p>
</div>

<h2>

<a href="http://www.nytimes.com/pages/politics/index.html">Politics</a>
</h2>

</div>
<div class="navigation tabsContainer">
<ul class="tabs">
<li id="navWorld" class="first ">
<a href="http://www.nytimes.com/pages/world/index.html">World</a>
</li>	<li id="navUs" class="selected">
<a href="http://www.nytimes.com/pages/national/index.html">U.S.</a>
</li>	<li id="navNyregion" >
<a href="http://www.nytimes.com/pages/nyregion/index.html">N.Y. / Region</a>
</li>	<li id="navBusiness" >
<a href="http://www.nytimes.com/pages/business/index.html">Business</a>
</li>	<li id="navTechnology" >
<a href="http://www.nytimes.com/pages/technology/index.html">Technology</a>
</li>	<li id="navScience" >
<a href="http://www.nytimes.com/pages/science/index.html">Science</a>
</li>	<li id="navHealth" >
<a href="http://www.nytimes.com/pages/health/index.html">Health</a>
</li>	<li id="navSports" >
<a href="http://www.nytimes.com/pages/sports/index.html">Sports</a>
</li>	<li id="navOpinion" >
<a href="http://www.nytimes.com/pages/opinion/index.html">Opinion</a>
</li>	<li id="navArts" >
<a href="http://www.nytimes.com/pages/arts/index.html">Arts</a>
</li>	<li id="navStyle" >
<a href="http://www.nytimes.com/pages/style/index.html">Style</a>
</li>	<li id="navTravel" >
<a href="http://www.nytimes.com/pages/travel/index.html">Travel</a>
</li>	<li id="navJobs" >
<a href="http://www.nytimes.com/pages/jobs/index.html">Jobs</a>
</li>	<li id="navRealestate" >
<a href="http://www.nytimes.com/pages/realestate/index.html">Real Estate</a>
</li>	<li id="navAutomobiles" >
<a href="http://www.nytimes.com/pages/automobiles/index.html">Autos</a>
</li></ul>
</div>
<!--$Id: politicsSubNavigation.html 99593 2012-05-21 18:33:21Z kom $ -->
<div class="subNavigation tabContent active">
<ul class="primaryList wrap">
<li class="firstItem politicsHomeItem"><a href="http://www.nytimes.com/politics/">Politics<br>Home</a></li>
<li class="theCaucusItem"><a href="http://thecaucus.blogs.nytimes.com/">The Caucus</a></li>
<li class="fiveThirtyEightItem"><a href="http://fivethirtyeight.blogs.nytimes.com/">FiveThirty<br/>Eight</a></li>
<li class="electoralMap"><a href="http://elections.nytimes.com/2012/electoral-map">Election<br/>2012</a></li>
<li class="congressItem"><a href="http://politics.nytimes.com/congress/">Inside<br/>Congress</a></li>
<li class="pollWatchItem"><a href="http://topics.nytimes.com/top/reference/timestopics/subjects/n/newyorktimes-poll-watch/index.html">Poll<br/>Watch</a></li>
<li class="videoItem"><a href="http://video.nytimes.com/video/playlist/politics/1194811622221/index.html">Video</a></li>   
</ul>
</div>		    		          

<div class="singleAd" id="TopAd">
<!-- ADXINFO classification="Leaderboard_-_Standard" campaign="GOOGLE_ADX_BUSINESS_LB_14" priority="1350" isInlineSafe="N" width="728" height="90" --><center>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-4177862836555934";
/* BUSINESS_LB_14 */
google_ad_slot = "9884677559";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>
</div>

<div id="main">
<div id="interactiveShell">
<div class="columnGroup firstColumnGroup">
<div class="ledeStory">
<div class="module insetHFullWidth">
<script type="text/javascript">
var articleToolsShareData = {"url":"http:\/\/www.nytimes.com\/interactive\/2012\/02\/13\/us\/politics\/2013-budget-proposal-graphic.html","headline":"Four Ways to Slice Obama\u2019s 2013 Budget Proposal","description":"Explore every nook and cranny of President Obama\u2019s federal budget proposal.","keywords":"","section":"us","sub_section":"politics","section_display":"U.S.","sub_section_display":"Politics","byline":null,"pubdate":"February 13, 2012","passkey":null};
function getShareURL() {
    return encodeURIComponent(articleToolsShareData.url);
}
function getShareHeadline() {
    return encodeURIComponent(articleToolsShareData.headline);
}
function getShareDescription() {
    return encodeURIComponent(articleToolsShareData.description);
}
function getShareKeywords() {
    return encodeURIComponent(articleToolsShareData.keywords);
}
function getShareSection() {
    return encodeURIComponent(articleToolsShareData.section);
}
function getShareSubSection() {
	return encodeURIComponent(articleToolsShareData.sub_section);
}
function getShareSectionDisplay() {
    return encodeURIComponent(articleToolsShareData.section_display);
}
function getShareSubSectionDisplay() {
    return encodeURIComponent(articleToolsShareData.sub_section_display);
}
function getShareByline() {
    return encodeURIComponent(articleToolsShareData.byline);
}
function getSharePubdate() {
    return encodeURIComponent(articleToolsShareData.pubdate);
}
function getSharePasskey() {
    return encodeURIComponent(articleToolsShareData.passkey);
}
</script>
<div id="articleToolsTop" class="articleTools">
<div class="box">
<div class="inset">
<ul id="toolsList" class="toolsList wrap">
<li class="email">

<a id="emailThis" onClick="s_code_linktrack('Article-Tool-EmailSignIn');" 
           href="http://www.nytimes.com/auth/login?URI=http://www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html">Sign In to E-Mail</a>
</li>
<!--NYT_DYNAMIC_SPLITPAGE <li class="singlePage">-->
<A HREF="/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html?_r=1&pagewanted=all"><!--NYT_DYNAMIC_SPLITPAGE Single Page--></a>
<!--NYT_DYNAMIC_SPLITPAGE </li>-->
</ul>
</div>
</div>
</div>
<script type="text/javascript" language="JavaScript">
    writePost();
    </script>
<div class="storyHeader">
<h6 class="dateline">
<span class="timestamp">UPDATED</span> February 12, 2012                    </h6>
<h1>Four Ways to Slice Obama’s 2013 Budget Proposal</h1>
</div><!--close .storyHeader -->
<div class="storySummary">
<span class="summary">Explore every nook and cranny of President Obama's federal budget proposal.</span>
</div><!--close .storySummary -->
</div><!--end .module insetHFullWidth -->
<div id="interactiveFreeFormMain">
<!--BEGIN Stencil generated content. -->
<!--Project ID: 2012/0202-federal-budget/ -->
<!--Generated at: Mon Feb 13 18:08:54 2012 -->
<style type='text/css'>

/********************************
 ** FILE: base.css
 ********************************/

/* Structure */
.nytg {
  font-family: Arial;
}
#nytg-chartFrame{
  width: 970px;
  height: 550px;
  -webkit-transition: height ease-in-out 1s;  
  -moz-transition: height ease-in-out 1s;    
  -o-transition: height ease-in-out 1s;    
  -ms-transition: height ease-in-out 1s;        
}


#nytg-chart {
  position: relative;
  width: 100%;
  height: 100%;
}
#nytg-error {
  
  
}
#nytg-error p {
  text-align: center;
  font-size: 16px;
  line-height: 20px;
  margin: 10px;
  border: solid 1px #CCC;
  background: #ffd;
  padding: 10px;
  
}

#nytg-error a {
  text-decoration: underline;
}

#nytg-chartCanvas {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 10;
  width: 100%;
  height: 100%;
  overflow: hidden;
  
}
#nytg-chartCanvas svg {
  height: 100%;
  overflow: hidden;config/
	assets.yml
	settings.yml

}

#nytg-tooltipContainer {
  position: absolute;
  bottom: 0;
  width: 230px;
  left: -125px;
  font-size: 12px;
  line-height: 16px;
  padding: 10px;
  border-radius: 3px;
  background: rgba(255,255,255,0.9);
  color: #000;
  box-shadow: 0 1px 5px rgba(0,0,0,0.4);
  -moz-box-shadow: 0 1px 5px rgba(0,0,0,0.4);  
  border:1px solid rgba(200,200,200,0.85);
  text-align:center;
}

#nytg-tooltip {
 text-align:center;  
  z-index: 1000;
  position: absolute;
  display: none;
}

#nytg-tooltip .nytg-tail {
  position: absolute;
  bottom: -8px;
  left: 105px;
  width: 40px;
  height: 8px;
  background: url(http://graphics8.nytimes.com/packages/images/newsgraphics/2012/0202-federal-budget/tail_white.png) 50% 0%;
}
#nytg-tooltip .nytg-department {
  text-transform: uppercase;
  text-align: left;
  font-size: 10px;
  margin-bottom: 2px;
  color:#666;
  text-align:center;  

}
#nytg-tooltip .nytg-rule{
  height:1px;
  margin:1px auto 3px;
  background:#ddd;
  width:130px;
}

#nytg-tooltip .nytg-discretion{
  color:#666;
/*   text-transform:uppercase;*/
  font-size: 11px;   
  text-align:center;  
  font-style:italic;
}
#nytg-tooltip .nytg-name {
  text-align: left;
  font-size: 13px;
/*  width:170px;*/
 text-align:center;  
}
#nytg-tooltip .nytg-value {
/*  position:absolute;*/
 text-align:center;
  right:10px;
  top:28px;
  font-size: 16px;
/*  width:100px;*/
 text-align:center;  
  overflow:hidden;
  font-weight:bold;
}
#nytg-tooltip .nytg-change {
  padding-left:10px;
/*  width:110px;  */
  font-size: 16px;  
  text-align:right;  
  overflow:hidden;
/*  position:absolute;*/
  font-weight:bold;  
  color:#666;
 text-align:center;  
 display:inline;
}
#nytg-tooltip .nytg-valuesContainer {
  padding-top:7px;
  
}
#nytg-tooltip.nytg-minus .nytg-change{
  color:#900;
}
#nytg-tooltip.nytg-plus .nytg-change{
  color:#090;
}

/* Navigation */
.nytg-navBar {
  border-top: solid 1px #DDD;
  padding: 15px 0 0;
  margin: 0 10px;
  z-index: 100;
  position: absolute;
  width: 950px;
}


.nytg-navigation {
  
}
.nytg-navigation li {
  color: #999;
  font-size: 14px;
  cursor: pointer;
  float: left;
  padding: 10px 18px;
  border-top: solid 1px #CCC;
  border-bottom: solid 1px #CCC;
  border-left: solid 1px #CCC;
  background: #f9f9f9;
  margin: 0 0;
}

.nytg-navigation li:first-of-type{
  border-radius: 4px 0 0 4px;
}
.nytg-navigation li:last-of-type{

  border-right: solid 1px #CCC;
  border-radius: 0 4px 4px 0;
}
.nytg-navigation li.selected {
  color: #000;
  background: #e9e9e9;
  border-color: #AAA;
  box-shadow: inset 0px 0px 4px rgba(0,0,0,0.2);
}


/*Category List*/
#nytg-categoryBrowser li{
  cursor: pointer;
  background-image: none;
  background-color: none;
  border-bottom: solid 1px #f0f0f0;
  padding: 3px;
  margin: 0 0 1px 0;
}
#nytg-categoryBrowser li:hover {
  background-color: #f3f3f3;
}


/* Scoop Fixes */

span.noWrap.feedback {
  white-space: normal;
}

#interactiveFooter {
    border-top:1px solid #DDDDDD;
    
    margin-top:10px;
    padding-top:12px !important;
}

div.storyHeader h1 {
    font-size: 26px!important;
    margin-bottom:4px!important;
    margin-top:3px!important;
}

.ledeStory div.storySummary .summary {
  line-height: 25px;
  font-size: 15px;
/*  display: none;*/
}

.ledeStory .insetHFullWidth .storyHeader .dateline{line-height:2.4em;margin-bottom:3px;margin-top:0px;}
.insetHFullWidth #articleToolsTop{margin-bottom:0;margin-top:0px;}


/********************************
 ** FILE: overlays.css
 ********************************/

/*Overlays*/
#nytg-overlays {
  position: absolute;
  z-index: 40;
}

.nytg-overlay {
  position: absolute;  
  display:none;
  color: #666;
  
}
.nytg-overlay h5 {
  font-size: 16px;
  line-height: 16px;
  margin-bottom: 7px;
}
.nytg-overlay p {
  margin: 0;
  font-size: 12px;
  line-height: 1.45em;
}
.nytg-overlaySVG {
  width: 970px;
  height: 850px;
  position: absolute;
  z-index: 0;
}



/*Start*/
.nytg-overview {
  position: absolute;
  width: 275px;
  top:100px;
  left: 10px;
}

.nytg-overview p{
  font-size: 13px;
}

.nytg-aside {
  position: absolute;
  width: 125px;
  left: 775px;
  top: 266px;
  text-align: center;
}

.nytg-increasesLabel {
  position: absolute;
  top: 100px;
  left: 540px;
  width: 60px;
  border-top: dashed 1px rgba(0,0,0,0.2);
}
.nytg-increasesLabel span {
  position: absolute;
  right: -105px;
  top: -10px;
  width: 100px;
}
.nytg-decreasesLabel {
  position: absolute;
  top: 470px;
  left: 560px;
  width: 60px;
  border-top: dashed 1px rgba(0,0,0,0.2);
}
.nytg-decreasesLabel span {
  position: absolute;
  right: -105px;
  top: -10px;
  width: 100px;
}


#nytg-deficitCircle {
  position: absolute;
  width: 250px;
  height: 250px;
  top: 60px;
  left: 700px;
}

.nytg-deficitCircle {
  stroke-width:1;
  stroke:#999;
  stroke-dasharray:4 4;
  fill:none;
}




#nytg-colorKey {
  position: absolute;
  top: 210px;
  left: 10px;
  width: 200px;
  margin: 0;
  padding: 0;
  overflow: hidden;
}
#nytg-sizeKey {
  position: relative;
  height: 110px;
  width: 200px;
}
#nytg-scaleKey {
  width: 100%;
  height: 100%;
  position: absolute;
}

.nytg-circleKeyLabel {
  position: absolute;
  border-top: solid 1px #DDD;
  width: 40px;
}

#nytg-sizeKey .nytg-circleKeyLabel span {
  font-size: 10px;
  color: #999;
  position: absolute;
  display: block;
  left: 45px;
  top: -8px;
  width: 80px;
  z-index: 100;
}

.nytg-scaleKeyCircle {
  stroke-width:1;
  stroke:#999;
  stroke-dasharray:2 2;
  fill:none;
}

#nytg-colorKey ul {
  margin: 0;
  padding: 0;
}
#nytg-colorKey p {
  margin-bottom: 8px;
}

#nytg-colorKey li{
  background-image: none;
  padding: 0;
  margin: 0;
  float: left;
  display: block;
  height: 100%;
}

.nytg-colorSwatches{
  width: 100%;
  height: 10px;
}

.nytg-colorSwatches li {
  width: 16%;
  border-right: solid white 1px;
}

.nytg-colorTicks {
  height: 6px;
}
.nytg-colorTicks li {
  width: 16%;
  border-right: solid #CCC 1px;
}

.nytg-colorLabels {
  margin-top: 3px;
  height: 20px;
  position: relative;
  left: 8%;

}

.nytg-colorLabels li {
  width: 16%;
  text-align: center;
  font-size: 10px;
  line-height: 1em;
  padding: 4px 0 0 0!important;
  margin: 0;
}




/*Mandatory*/

#nytg-mandatoryOverlay {
  
}

.nytg-discretionaryExplainer {
  text-align: center;
  left: 550px;
  top: 100px;
  position: absolute;
  width: 340px;
}


.nytg-mandatoryExplainer {
  text-align: center;
  left: 150px;
  top: 80px;
  position: absolute;
  width: 340px;
}

.nytg-discretionaryAside {
  position: absolute;
  left: 800px;
  top: 120px;
  width: 130px;
}

.nytg-mandatoryAside {
  position: absolute;
  left: 30px;
  top: 120px;
  width: 140px;
}

/*By Change*/
#nytg-discretionaryIntro {
  top: 80px;
  left: 10px;
  width: 500px;
  position: absolute;
}
.nytg-discretionaryTickLabel {
  width: 200px;
  position: absolute;
  left: 10px;
}
.nytg-discretionaryTickLabel p {
  position:relative;
  top: -6px;
  font-size: 10px;
}
.nytg-discretionaryTick {
  position: absolute;
  border-top: dashed 1px #CCC;
  left: 60px;
  width: 900px;
}
.nytg-discretionaryTick p {
  font-size: 10px;
  text-align: left;
  position: absolute;
  left: -50px;
  width: 40px;
  top: -8px;
}
.nytg-discretionaryZeroTick {
  border-top: solid 1px #AAA;
  left: 10px;
  width: 950px;
}


/*Department*/
.nytg-departmentAnnotation {
  position: absolute;
  z-index: 1000;
}

.nytg-departmentAnnotation p {
  font-size: 12px;
  line-height: 1.2em;
  text-align: center;
  margin: 0;
  padding: 0;
}

.nytg-departmentAnnotation p.total {
  font-weight: bold;
  margin-bottom: 0.3em;
  color:#000;
}
.nytg-departmentAnnotation p.total {
  font-weight: bold;  
}

.nytg-departmentAnnotation.nytg-row0 p {
  font-size: 14px;
}
.nytg-departmentAnnotation.nytg-row0 p.total {
  font-size: 16px;
}
.nytg-departmentAnnotation.nytg-row1 p{
  font-size: 11px;
}
.nytg-departmentAnnotation.nytg-row1 p.total{
  font-size: 13px;
}

.nytg-departmentAnnotation.nytg-row2 p{
  font-size: 10px;
}
.nytg-departmentAnnotation.nytg-row2 p.total{
  font-size: 12px;
}

.nytg-departmentAnnotation.nytg-row3 p{
  font-size: 10px;
}
.nytg-departmentAnnotation.nytg-row3 p.total{
  font-size: 12px;
}
.nytg-departmentAnnotation.nytg-row4 p{
  font-size: 10px;
}
.nytg-departmentAnnotation.nytg-row4 p.total{
  font-size: 12px;
}


/*Department*/
#nytg-departmentOverlay p.nytg-emptyCircleLabel{
  position: absolute;
  left: 125px;
  top: 280px;
  width: 80px;
  text-align: center;
  color: #999;
  font-size: 11px;
  line-height: 1.45em;
  font-style: italic;
  
}




/********************************
 ** FILE: color_key.css
 ********************************/

.change-decrease3 {
  background-color: #d84b2a;
}
.change-decrease2 {
  background-color: #ee9586;
}
.change-decrease1{
  background-color: #e4b7b2;
}
.change-same {
  background-color: #CCC;
}
.change-increase1 {
  background-color: #beccae;
}
.change-increase2 {
  background-color: #9caf84;
}
.change-increase3 {
  background-color: #7aa25c;
}

/*text color for changes*/
.change-decrease3 span.label {
    color: #eeb0a2;
}
.change-decrease2 span.label {
    color: #f8d0ca;
}
.change-decrease1 span.label {
    color: #f3dfdd;
}
.change-same span.label {
    color: #FFFFFF;
}
.change-increase1 span.label {
    color: #e2e8db;
}
.change-increase2 span.label {
    color: #d3dbc9;
}
.change-increase3 span.label {
    color: #c5d6b7;
}






</style>
<div class="nytg">
<!--[if IE 6]>
  <div id="nytg-error">
  <p>This interactive graphic requires a browser with SVG support, such as <a href="http://www.google.com/chrome">Chrome</a>, <a href="http://www.mozilla.org/en-US/firefox/">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a> or the latest <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home">Internet Explorer 9</a>. </p>
  <img src="http://graphics8.nytimes.com/packages/images/newsgraphics/2012/0202-federal-budget/error.png" width="970" alt="Error">
  <div id="nytg-chartFrame" style="display:none;">
		<![endif]-->
<!--[if IE 7]>
  <div id="nytg-error">
  <p>This interactive graphic requires a browser with SVG support, such as <a href="http://www.google.com/chrome">Chrome</a>, <a href="http://www.mozilla.org/en-US/firefox/">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a> or the latest <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home">Internet Explorer 9</a>. </p>
  <img src="http://graphics8.nytimes.com/packages/images/newsgraphics/2012/0202-federal-budget/error.png" width="970" alt="Error">
  <div id="nytg-chartFrame" style="display:none;">
		<![endif]-->
<!--[if IE 8]>
  <div id="nytg-error">
  <p>This interactive graphic requires a browser with SVG support, such as <a href="http://www.google.com/chrome">Chrome</a>, <a href="http://www.mozilla.org/en-US/firefox/">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a> or the latest <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home">Internet Explorer 9</a>. </p>
  <img src="http://graphics8.nytimes.com/packages/images/newsgraphics/2012/0202-federal-budget/error.png" width="970" alt="Error">
  <div id="nytg-chartFrame" style="display:none;">
		<![endif]-->
<!--[if IE 9]>
		<div id="nytg-chartFrame">
		<![endif]-->  
<![if !IE]><div id="nytg-chartFrame"><![endif]>
<div id="nytg-chart">
<div class="nytg-navBar">
<div id="nytg-search" style="display:none;"></div>
<ul class="nytg-navigation clearfix">
<li id="nytg-nav-all">All Spending</li>
<li id="nytg-nav-mandatory">Types of Spending</li>
<li id="nytg-nav-discretionary">Changes</li>
<li id="nytg-nav-deparment">Department Totals</li>
<!--<li id="nytg-nav-comparison">Historical</li> -->
</ul>
</div>
<div id="nytg-tooltip">
<div id="nytg-tooltipContainer">
<div class="nytg-department"></div>
<div class="nytg-rule"></div>
<div class="nytg-name"></div>
<div class="nytg-discretion"></div>
<div class="nytg-valuesContainer">
<span class="nytg-value"></span>
<span class="nytg-change"></span>
</div>
<div class="nytg-chart"></div>
<div class="nytg-tail"></div>
</div>
</div>
<div id="nytg-overlays">
<div class="nytg-overlay" id="nytg-totalOverlay" >
<div class="nytg-overview">
<h5>How $3.7 Trillion Is Spent</h5>
<p>Mr. Obama's budget proposal includes $3.7 trillion in spending in 2013, and forecasts a $901 billion deficit.</p>
<svg id="nytg-deficitCircle"></svg>
</div>
<div class="nytg-aside">
<p>The proposal forecasts a $901 billion deficit.</p>
</div>
<div class="nytg-increasesLabel">
<span>Largest Increases</span>
</div>
<div class="nytg-decreasesLabel">
<span>Largest Cuts</span>
</div>
<div id="nytg-colorKey">
<p>Circles are sized according to the proposed spending.</p>
<div id="nytg-sizeKey">
<div style="left:52px;top:10px;width:20px;" class="nytg-circleKeyLabel"><span style="left:25px;">$100 billion</span></div>
<div style="left:32px;top:42px;" class="nytg-circleKeyLabel"><span>$10 billion</span></div>
<div style="left:32px;top:57px;" class="nytg-circleKeyLabel"><span>$1 billion</span></div>
<svg id="nytg-scaleKey"></svg>
</div>
<p>Color shows amount of cut or increase from 2012.</p>
<ul class="nytg-colorSwatches">
<li class="change-decrease3"></li>
<li class="change-decrease2"></li>
<li class="change-decrease1"></li>
<li class="change-increase1"></li>
<li class="change-increase2"></li>
<li class="change-increase3"></li>
</ul>
<ul class="nytg-colorTicks">
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<ul class="nytg-colorLabels">
<li>&ndash;25%</li>
<li>&ndash;5%</li>
<li>0</li>
<li>+5%</li>
<li>+25%</li>
</ul>
</div>
</div>
<div class="nytg-overlay" id="nytg-mandatoryOverlay" >
<div class="nytg-mandatoryExplainer">
</div>
<div class="nytg-mandatoryAside">
<h5>Mandatory</h5>
<p><strong style="font-size:16px;padding-bottom:4px;display:block;">$2.5 trillion</strong></p>
<p>About 70 percent of budgetary spending is controlled by existing laws, including entitlements like Medicare, Medicaid and Social Security.</p>
</div>
<div class="nytg-discretionaryExplainer">
</div>
<div class="nytg-discretionaryAside">
<h5>Discretionary</h5>
<p><strong style="font-size:16px;padding-bottom:4px;display:block;">$1.1 trillion</strong></p>
<p>Only about 30 percent of the budget is controlled by the annual budget process. Last August, the White House and Congress agreed to a cap on this spending.</p>
</div>
</div>
<div class="nytg-overlay" id="nytg-discretionaryOverlay" >
<div id="nytg-discretionaryIntro">
<h5>Changes to Discretionary Spending</h5>
<p>Discretionary spending is controlled by the annual budget process. The White House and Congress agreed to a cap in spending in August, so proposed increases in categories like education and energy require cuts in other areas.</p>
</div>
</div>
<div class="nytg-overlay" id="nytg-departmentOverlay" >
<p class="nytg-emptyCircleLabel">Empty circles show income.</p>
</div>
<div class="nytg-overlay" id="nytg-comparisonOverlay" >
<h5>Comparison Overlay</h5>
</div>
</div>
<div id="nytg-chartCanvas"></div>
</div>
</div>
</div>

  
<script type='text/javascript'>

/********************************
 ** FILE: Javascript templates
 ********************************/

var nytg = nytg || {};

</script>
<script type='text/javascript'>

/********************************
 ** FILE: lib/jquery.js
 ********************************/

// NOTE: nytg Additions at bottom of file


// BEGIN nytg Additions
jQuery.noConflict();
var $j = jQuery;
// END nytg Additions


/********************************
 ** FILE: lib/nytg.js
 ********************************/

var nytg = nytg || {};

nytg.formatNumber = function(n,decimals) {
    var s, remainder, num, negativePrefix, negativeSuffix, prefix, suffix;
    suffix = ""
    negativePrefix = ""
    negativeSuffix = ""
    if (n < 0) {
      negativePrefix = "";
      negativeSuffix = " in income"
      n = -n
    };
    
    if (n >= 1000000000000) {
        suffix = " trillion"
        n = n / 1000000000000
        decimals = 2
    } else if (n >= 1000000000) {
        suffix = " billion"
        n = n / 1000000000
        decimals = 1
    } else if (n >= 1000000) {
        suffix = " million"
        n = n / 1000000
        decimals = 1
    } 
    
    
    prefix = ""
    if (decimals > 0) {
        if (n<1) {prefix = "0"};
        s = String(Math.round(n * (Math.pow(10,decimals))));
        if (s < 10) {
            remainder = "0" + s.substr(s.length-(decimals),decimals);
            num = "";
        } else{
            remainder = s.substr(s.length-(decimals),decimals);
            num = s.substr(0,s.length - decimals);
        }
        
        
        return  negativePrefix + prefix + num.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") + "." + remainder + suffix + negativeSuffix;
    } else {
        s = String(Math.round(n));
        s = s.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
        return  negativePrefix + s + suffix + negativeSuffix;
    }
};



/********************************
 ** FILE: Chart.js
 ********************************/

var nytg = nytg || {};

nytg.Chart = function(){
  return {
    $j : jQuery,
    //defaults
    width           : 970,
    height          : 850,
    groupPadding    : 10,
    totalValue      : 3700000000,
    deficitValue    : 901000000,
    // CONST
    MANDATORY       : "Mandatory",
    DISCRETIONARY   : "Discretionary",
    NET_INTEREST    : "Net interest",
    
    //will be calculated later
    boundingRadius  : null,
    maxRadius       : null,
    centerX         : null,
    centerY         : null,
    scatterPlotY    : null,
        
    //d3 settings
    defaultGravity  : 0.1,
    defaultCharge   : function(d){
                        if (d.value < 0) {
                          return 0
                        } else {
                          return -Math.pow(d.radius,2.0)/8 
                        };
                      },
    links           : [],
    nodes           : [],
    positiveNodes   : [],
    force           : {},
    svg             : {},
    circle          : {},
    gravity         : null,
    charge          : null,
    changeTickValues: [-0.25, -0.15, -0.05, 0.05, 0.15, 0.25],
    categorizeChange: function(c){
                        if (isNaN(c)) { return 0;
                        } else if ( c < -0.25) { return -3;
                        } else if ( c < -0.05){ return -2;
                        } else if ( c < -0.001){ return -1;
                        } else if ( c <= 0.001){ return 0;
                        } else if ( c <= 0.05){ return 1;
                        } else if ( c <= 0.25){ return 2;
                        } else { return 3; }
                      },
    fillColor       : d3.scale.ordinal().domain([-3,-2,-1,0,1,2,3]).range(["#d84b2a", "#ee9586","#e4b7b2","#AAA","#beccae", "#9caf84", "#7aa25c"]),
    strokeColor     : d3.scale.ordinal().domain([-3,-2,-1,0,1,2,3]).range(["#c72d0a", "#e67761","#d9a097","#999","#a7bb8f", "#7e965d", "#5a8731"]),
    getFillColor    : null,
    getStrokeColor  : null,
    pFormat         : d3.format("+.1%"),
    pctFormat       : function(){return false},
    tickChangeFormat: d3.format("+%"),
    simpleFormat    : d3.format(","),
    simpleDecimal   : d3.format(",.2f"),

    bigFormat       : function(n){return nytg.formatNumber(n*1000)},
    nameFormat      : function(n){return n},
    discretionFormat: function(d){
                        if (d == 'Discretionary' || d == 'Mandatory') {
                          return d + " spending"
                        } else {return d}
                      },  
    
    rScale          : d3.scale.pow().exponent(0.5).domain([0,1000000000]).range([1,90]),
    radiusScale     : null,
    changeScale     : d3.scale.linear().domain([-0.28,0.28]).range([620,180]).clamp(true),
    sizeScale       : d3.scale.linear().domain([0,110]).range([0,1]),
    groupScale      : {},
    
    //data settings
    currentYearDataColumn   : 'budget_2013',
    previousYearDataColumn  : 'budget_2012',
    data                    : nytg.budget_array_data,
    categoryPositionLookup  : {},
    categoriesList          : [],
    
    // 
    // 
    // 
    init: function() {
      var that = this;
      
      this.scatterPlotY = this.changeScale(0);
      
      this.pctFormat = function(p){
        if (p === Infinity ||p === -Infinity) {
          return "N.A."
        } else {
          return that.pFormat(p)
        }
        
      }
      
      this.radiusScale = function(n){ return that.rScale(Math.abs(n)); };
      this.getStrokeColor = function(d){
        // if (d.isNegative) {
        //   return "#333"
        // }
        return that.strokeColor(d.changeCategory);
      };
      this.getFillColor = function(d){
        if (d.isNegative) {
          return "#fff"
        }
        return that.fillColor(d.changeCategory);
      };
      
      this.boundingRadius = this.radiusScale(this.totalValue);
      this.centerX = this.width / 2;
      this.centerY = 300;
      
      nytg.category_data.sort(function(a, b){  
        return b['total'] - a['total'];  
      });
      
      //calculates positions of the category clumps
      //it is probably overly complicated
      var columns = [4, 7, 9, 9]
          rowPadding = [150, 100, 90, 80, 70],
          rowPosition = [220, 450, 600, 720, 817],
          rowOffsets = [130, 80, 60, 45, 48]
          currentX = 0,
          currentY = 0;
      for (var i=0; i < nytg.category_data.length; i++) {
        var t = 0, 
            w,
            numInRow = -1,
            positionInRow = -1,
            currentRow = -1,
            cat = nytg.category_data[i]['label'];
        // calc num in this row
        for (var j=0; j < columns.length; j++) {
          if (i < (t + columns[j])) {
            numInRow = columns[j];
            positionInRow = i - t;
            currentRow = j;
            break;
          };
          t += columns[j];
        };
        if (numInRow === -1) {
          numInRow = nytg.category_data.length - d3.sum(columns);
          currentRow = columns.length;
          positionInRow = i  - d3.sum(columns)
        };
        nytg.category_data[i].row = currentRow;
        nytg.category_data[i].column = positionInRow;
        w = (this.width - 2*rowPadding[currentRow]) / (numInRow-1)
        currentX = w * positionInRow + rowPadding[currentRow];
        currentY = rowPosition[currentRow];
        this.categoriesList.push(cat);
        this.categoryPositionLookup[cat] = {
          x:currentX, 
          y:currentY,
          w: w*0.9,
          offsetY: rowOffsets[currentRow],
          numInRow:numInRow,
          positionInRow:positionInRow
        }        
      };
      
      //
      this.groupScale = d3.scale.ordinal().domain(this.categoriesList).rangePoints([0,1]);
      
      // Builds the nodes data array from the original data
      for (var i=0; i < this.data.length; i++) {
        var n = this.data[i];
        var out = {
          sid: n['id'],
          radius: this.radiusScale(n[this.currentYearDataColumn]),
          group: n['department'],
          change: n['change'],
          changeCategory: this.categorizeChange(n['change']),
          value: n[this.currentYearDataColumn],
          name: n['name'],
          discretion: n['discretion'],
          isNegative: (n[this.currentYearDataColumn] < 0),
          positions: n.positions,
          x:Math.random() * 1000,
          y:Math.random() * 1000
        }
        if (n.positions.total) {
          out.x = n.positions.total.x + (n.positions.total.x - (that.width / 2)) * 0.5;
          out.y = n.positions.total.y + (n.positions.total.y - (150)) * 0.5;
        };
        if ((n[this.currentYearDataColumn] > 0)!==(n[this.previousYearDataColumn] > 0)) {
          out.change = "N.A.";
          out.changeCategory = 0;
        };
        this.nodes.push(out)
      };
      
      this.nodes.sort(function(a, b){  
        return Math.abs(b.value) - Math.abs(a.value);  
      });
      
      for (var i=0; i < this.nodes.length; i++) {
        if(!this.nodes[i].isNegative ){
          this.positiveNodes.push(this.nodes[i])
        }
      };
      
      this.svg = d3.select("#nytg-chartCanvas").append("svg:svg")
        .attr("width", this.width);
      
        for (var i=0; i < this.changeTickValues.length; i++) {
          d3.select("#nytg-discretionaryOverlay").append("div")
            .html("<p>"+this.tickChangeFormat(this.changeTickValues[i])+"</p>")
            .style("top", this.changeScale(this.changeTickValues[i])+'px')
            .classed('nytg-discretionaryTick', true)
            .classed('nytg-discretionaryZeroTick', (this.changeTickValues[i] === 0) )
        };
        d3.select("#nytg-discretionaryOverlay").append("div")
          .html("<p></p>")
          .style("top", this.changeScale(0)+'px')
          .classed('nytg-discretionaryTick', true)
          .classed('nytg-discretionaryZeroTick', true)
        d3.select("#nytg-discretionaryOverlay").append("div")
          .html("<p>+26% or higher</p>")
          .style("top", this.changeScale(100)+'px')
          .classed('nytg-discretionaryTickLabel', true)
        d3.select("#nytg-discretionaryOverlay").append("div")
          .html("<p>&minus;26% or lower</p>")
          .style("top", this.changeScale(-100)+'px')
          .classed('nytg-discretionaryTickLabel', true)
        
          
      
      // total circle
      // this.svg.append("circle")
      //   .attr('r', this.radiusScale(this.totalValue))
      //   .style("stroke-width",1)
      //   .style('stroke',"#AAA")
      //   .style('fill','none')
      //   .attr('cx', this.width/2)
      //   .attr('cy', this.height/2);
        
      // deficit circle
      d3.select("#nytg-deficitCircle").append("circle")
        .attr('r', this.radiusScale(this.deficitValue))
        .attr('class',"nytg-deficitCircle")
        .attr('cx', 125)
        .attr('cy', 125);
        
        
      d3.select("#nytg-scaleKey").append("circle")
        .attr('r', this.radiusScale(100000000))
        .attr('class',"nytg-scaleKeyCircle")
        .attr('cx', 30)
        .attr('cy', 30);
      d3.select("#nytg-scaleKey").append("circle")
        .attr('r', this.radiusScale(10000000))
        .attr('class',"nytg-scaleKeyCircle")
        .attr('cx', 30)
        .attr('cy', 50);
      d3.select("#nytg-scaleKey").append("circle")
        .attr('r', this.radiusScale(1000000))
        .attr('class',"nytg-scaleKeyCircle")
        .attr('cx', 30)
        .attr('cy', 55);
      
        
      var departmentOverlay = $j("#nytg-departmentOverlay")
      
      for (var i=0; i < nytg.category_data.length; i++) {
        var cat = nytg.category_data[i]['label']
        var catLabel = nytg.category_data[i]['short_label']
        var catTot = this.bigFormat(nytg.category_data[i]['total'])
        var catWidth = this.categoryPositionLookup[cat].w
        var catYOffset = this.categoryPositionLookup[cat].offsetY;
        var catNode;
        if (catLabel === "Other") {
          catNode = $j("<div class='nytg-departmentAnnotation nytg-row"+nytg.category_data[i]['row']+"'><p class='department'>"+catLabel+"</p></div>")
          
        } else {
          catNode = $j("<div class='nytg-departmentAnnotation nytg-row"+nytg.category_data[i]['row']+"'><p class='total'>$"+catTot+"</p><p class='department'>"+catLabel+"</p></div>")
          
        }
          catNode.css({'left':this.categoryPositionLookup[cat].x-catWidth/2,'top': this.categoryPositionLookup[cat].y - catYOffset, 'width':catWidth})
        departmentOverlay.append(catNode)
          
      };
      
      // This is the every circle
      this.circle = this.svg.selectAll("circle")
          .data(this.nodes, function(d) { return d.sid; });
          
      this.circle.enter().append("svg:circle")
        .attr("r", function(d) { return 0; } )
        .style("fill", function(d) { return that.getFillColor(d); } )
        .style("stroke-width", 1)
        .attr('id',function(d){ return 'nytg-circle'+d.sid })
        .style("stroke", function(d){ return that.getStrokeColor(d); })
        .on("mouseover",function(d,i) { 
          var el = d3.select(this)
          var xpos = Number(el.attr('cx'))
          var ypos = (el.attr('cy') - d.radius - 10)
          el.style("stroke","#000").style("stroke-width",3);
          d3.select("#nytg-tooltip").style('top',ypos+"px").style('left',xpos+"px").style('display','block')
            .classed('nytg-plus', (d.changeCategory > 0))
            .classed('nytg-minus', (d.changeCategory < 0));
          d3.select("#nytg-tooltip .nytg-name").html(that.nameFormat(d.name))

          d3.select("#nytg-tooltip .nytg-discretion").text(that.discretionFormat(d.discretion))
          d3.select("#nytg-tooltip .nytg-department").text(d.group)
          d3.select("#nytg-tooltip .nytg-value").html("$"+that.bigFormat(d.value))
          
          var pctchngout = that.pctFormat(d.change)
          if (d.change == "N.A.") {
            pctchngout = "N.A."
          };
          d3.select("#nytg-tooltip .nytg-change").html(pctchngout) })
        .on("mouseout",function(d,i) { 
          d3.select(this)
          .style("stroke-width",1)
          .style("stroke", function(d){ return that.getStrokeColor(d); })
          d3.select("#nytg-tooltip").style('display','none')});
      
            
      this.circle.transition().duration(2000).attr("r", function(d){return d.radius})
      
    },
    
    
    
    
    // 
    // 
    // 
    getCirclePositions: function(){
      var that = this
      var circlePositions = {};
      this.circle.each(function(d){
        
        circlePositions[d.sid] = {
          x:Math.round(d.x),
          y:Math.round(d.y)
        }
        
        
      })
      return JSON.stringify(circlePositions)
    },
    
    
    
    // 
    // 
    // 
    start: function() {
      var that = this;

      this.force = d3.layout.force()
        .nodes(this.nodes)
        .size([this.width, this.height])
        
      // this.circle.call(this.force.drag)
      
    },
    
    

    
    // 
    // 
    // 
    totalLayout: function() {
      var that = this;
      this.force
        .gravity(-0.01)
        .charge(that.defaultCharge)
        .friction(0.9)
        .on("tick", function(e){
          that.circle
            .each(that.totalSort(e.alpha))
            .each(that.buoyancy(e.alpha))
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
        })
        .start();
      
    },
    
    // 
    // 
    // 
    mandatoryLayout: function() {
      var that = this;
      this.force
        .gravity(0)
        .friction(0.9)
        .charge(that.defaultCharge)
        .on("tick", function(e){
          that.circle
            .each(that.mandatorySort(e.alpha))
            .each(that.buoyancy(e.alpha))
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
        })
        .start();
      
    },
    
    // 
    // 
    // 
    discretionaryLayout: function() {
      var that = this;
      this.force
        .gravity(0)
        .charge(0)
        .friction(0.2)
        .on("tick", function(e){
          that.circle
            .each(that.discretionarySort(e.alpha))
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
        })
        .start();
    },
    
    
    // 
    // 
    // 
    departmentLayout: function() {
      var that = this;
      this.force
        .gravity(0)
        .charge(1)
        .friction(0)
        .on("tick", function(e){
          that.circle
            // .each(that.departmentSort(e.alpha))
            // .each(that.collide(0.5))
            .each(that.staticDepartment(e.alpha))
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
        })
        .start();
    },
    
    
    // 
    // 
    // 
    comparisonLayout: function() {
      var that = this;
      this.force
        .gravity(0)
        .charge(that.defaultCharge)
        .friction(0.9)
        .on("tick", function(e){
          that.circle
            .each(that.comparisonSort(e.alpha))
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
        })
        .start();
      
    },
    
    
    // ----------------------------------------------------------------------------------------
    // FORCES
    // ----------------------------------------------------------------------------------------
    
    
    // 
    // 
    // 
    totalSort: function(alpha) {
      var that = this;
      return function(d){
        var targetY = that.centerY;
        var targetX = that.width / 2;
        
        
        if (d.isNegative) {
          if (d.changeCategory > 0) {
            d.x = - 200
          } else {
            d.x =  1100
          }
        }
        
        // if (d.positions.total) {
        //   targetX = d.positions.total.x
        //   targetY = d.positions.total.y
        // };
        
        
        
        // 
        d.y = d.y + (targetY - d.y) * (that.defaultGravity + 0.02) * alpha
        d.x = d.x + (targetX - d.x) * (that.defaultGravity + 0.02) * alpha
        
      };
    },
    
    // 
    // 
    // 
    buoyancy: function(alpha) {
      var that = this;
      return function(d){
          // d.y -= 1000 * alpha * alpha * alpha * d.changeCategory
          
          // if (d.changeCategory >= 0) {
          //   d.y -= 1000 * alpha * alpha * alpha
          // } else {
          //   d.y += 1000 * alpha * alpha * alpha
          // }
          
          
          var targetY = that.centerY - (d.changeCategory / 3) * that.boundingRadius
          d.y = d.y + (targetY - d.y) * (that.defaultGravity) * alpha * alpha * alpha * 100
          
          
          
      };
    },
    
    
    
    // 
    // 
    // 
    mandatorySort: function(alpha) {
      var that = this;
      return function(d){
        var targetY = that.centerY;
        var targetX = 0;
        
        if (d.isNegative) {
          if (d.changeCategory > 0) {
            d.x = - 200
          } else {
            d.x =  1100
          }
          return;
        }
        
        
        if (d.discretion === that.DISCRETIONARY) {
          targetX = 550
        } else if ((d.discretion === that.MANDATORY)||(d.discretion === that.NET_INTEREST)) {
          targetX = 400
        } else {
          targetX = 900
        };
        
        
        
        
        d.y = d.y + (targetY - d.y) * (that.defaultGravity) * alpha * 1.1
        d.x = d.x + (targetX - d.x) * (that.defaultGravity) * alpha * 1.1
      };
    },
    
    
    // 
    // 
    // 
    discretionarySort: function(alpha) {
      var that = this;
      return function(d){
        var targetY = that.height / 2;
        var targetX = 0;
        
        if (d.isNegative) {
          if (d.changeCategory > 0) {
            d.x = - 200
          } else {
            d.x =  1100
          }
          return;
        }
        
        
        if (d.discretion === "Discretionary") {
          targetY = that.changeScale(d.change);
          targetX = 100 + that.groupScale(d.group)*(that.width - 120);
          if (isNaN(targetY)) {targetY = that.centerY};
          if (targetY > (that.height-80)) {targetY = that.height-80};
          if (targetY < 80) {targetY = 80};
          
        } else if ((d.discretion === "Mandatory")||(d.discretion === "Net interest")) {
          targetX = -300 + Math.random()* 100;
          targetY = d.y;
        } else {
          targetX = 0
        };
        
        d.y = d.y + (targetY - d.y) * Math.sin(Math.PI * (1 - alpha*10)) * 0.2
        d.x = d.x + (targetX - d.x) * Math.sin(Math.PI * (1 - alpha*10)) * 0.1
      };
    },
    
    
    // 
    // 
    // 
    departmentSort: function(alpha){
      var that = this;
      return function(d){
        var targetY = 0,
            targetX = 0;
        
        if (that.categoryPositionLookup[d.group]) {
          targetY = that.categoryPositionLookup[d.group].y;
          targetX = that.categoryPositionLookup[d.group].x;
        } else {
        };
        
        
        var r =  Math.max(5, d.radius)
        d.y = d.y + (targetY - d.y) * (that.defaultGravity) * alpha * 0.5 * r
        d.x = d.x + (targetX - d.x) * (that.defaultGravity) * alpha * 0.5 * r
        
      };
    },
    
    
    
    
    // 
    // 
    // 
    staticDepartment: function(alpha) {
      var that = this;
      return function(d){
        var targetY = 0;
        var targetX = 0;
        
        if (d.positions.department) {
          targetX = d.positions.department.x;
          targetY = d.positions.department.y;
        };
        
        d.y += (targetY - d.y) * Math.sin(Math.PI * (1 - alpha*10)) * 0.6
        d.x += (targetX - d.x) * Math.sin(Math.PI * (1 - alpha*10)) * 0.4
      };
    },
    
    // 
    // 
    // 
    comparisonSort: function(alpha) {
      var that = this;
      return function(d){
        var targetY = that.height / 2;
        var targetX = 650;
        
        
        d.y = d.y + (targetY - d.y) * (that.defaultGravity) * alpha
        d.x = d.x + (targetX - d.x) * (that.defaultGravity) * alpha
      };
    },
    
    
    
    // 
    // 
    // 
    collide: function(alpha){
      var that = this;
      var padding = 6;
      var quadtree = d3.geom.quadtree(this.nodes);
      return function(d) {
        var r = d.radius + that.maxRadius + padding,
            nx1 = d.x - r,
            nx2 = d.x + r,
            ny1 = d.y - r,
            ny2 = d.y + r;
        quadtree.visit(function(quad, x1, y1, x2, y2) {
          if (quad.point && (quad.point !== d) && (d.group === quad.point.group)) {
            var x = d.x - quad.point.x,
                y = d.y - quad.point.y,
                l = Math.sqrt(x * x + y * y),
                r = d.radius + quad.point.radius;
            if (l < r) {
              l = (l - r) / l * alpha;
              d.x -= x *= l;
              d.y -= y *= l;
              quad.point.x += x;
              quad.point.y += y;
            }
          }
          return x1 > nx2
              || x2 < nx1
              || y1 > ny2
              || y2 < ny1;
        });
      };
        
    }
    
  }
};

  
  




/********************************
 ** FILE: ChooseList.js
 ********************************/

var nytg = nytg || {};
var $j = jQuery;

nytg.ChooseList = function(node, changeCallback) {
  this.container = $j(node);
  this.selectedNode = null;
  this.currentIndex = null;
  this.onChange = changeCallback;
  this.elements = this.container.find('li');
  this.container.find('li').on('click',$j.proxy(this.onClickHandler, this));
  this.selectByIndex(0);
};

nytg.ChooseList.prototype.onClickHandler = function(evt) {
  evt.preventDefault();
  this.selectByElement(evt.currentTarget);
};


nytg.ChooseList.prototype.selectByIndex = function(i) {
  this.selectByElement(this.elements[i])
};


nytg.ChooseList.prototype.selectByElement = function(el) {
  if (this.selectedNode) {
    $j(this.selectedNode).removeClass("selected");
  };
  $j(el).addClass("selected");
  for (var i=0; i < this.elements.length; i++) {
    if (this.elements[i] === el) {
      this.currentIndex = i;
    }
  };
  this.selectedNode = el;
  this.onChange(this);
};



/********************************
 ** FILE: base.js
 ********************************/

var $j = jQuery;

nytg.filename = function(index){
  var tabs = [
  "total",
  "mandatory",
  "discretionary",
  "department"];
  return tabs[index];
}
$j("#save").click(function(){
  $j.ajax({ 
    type: "POST", 
    url: "/save", 
    data: {
      'filename':nytg.filename(nytg.mainNav.currentIndex),
      'contents':nytg.c.getCirclePositions()
    }
  });
  
})


  
nytg.ready = function() {
  var that = this;
  nytg.c = new nytg.Chart();
  nytg.c.init();
  nytg.c.start();
  
  this.highlightedItems = [];
  
  // nytg.s = new nytg.SearchBox("nytg-search", nytg.budget_array_data, "name", "department", "budget_2012", "id");
  // nytg.s.findCallback = function(evt){
  //   var foundId = evt.id;    
  //   
  //   for (var i=0; i < that.highlightedItems.length; i++) {
  //     $j("#nytg-circle"+that.highlightedItems[i]).css({'stroke-width':1});
  //   };
  // 
  //   that.highlightedItems = [evt.id];
  //   for (var i=0; i < that.highlightedItems.length; i++) {
  //     $j("#nytg-circle"+that.highlightedItems[i]).css({'stroke-width':20});
  //   };
  //   
  // }

  
  

  var currentOverlay = undefined;
  nytg.mainNav = new nytg.ChooseList($j(".nytg-navigation"), onMainChange);
  function onMainChange(evt) {
    var tabIndex = evt.currentIndex
    if (this.currentOverlay !== undefined) {
      this.currentOverlay.hide();
    };
    if (tabIndex === 0) {
      nytg.c.totalLayout();
      this.currentOverlay = $j("#nytg-totalOverlay");
      this.currentOverlay.delay(300).fadeIn(500);
      $j("#nytg-chartFrame").css({'height':550});
    } else if (tabIndex === 1){
      nytg.c.mandatoryLayout();
      this.currentOverlay = $j("#nytg-mandatoryOverlay");
      this.currentOverlay.delay(300).fadeIn(500);
      $j("#nytg-chartFrame").css({'height':550});
    } else if (tabIndex === 2){
      nytg.c.discretionaryLayout();
      this.currentOverlay = $j("#nytg-discretionaryOverlay");
      this.currentOverlay.delay(300).fadeIn(500);
      $j("#nytg-chartFrame").css({'height':650});
    } else if (tabIndex === 4){
      nytg.c.comparisonLayout();
      this.currentOverlay = $j("#nytg-comparisonOverlay");
      this.currentOverlay.delay(300).fadeIn(500);
      $j("#nytg-chartFrame").css({'height':650});
    } else if (tabIndex === 3){
      nytg.c.departmentLayout();
      this.currentOverlay = $j("#nytg-departmentOverlay");
      this.currentOverlay.delay(300).fadeIn(500);
      $j("#nytg-chartFrame").css({'height':850});
    }
    
  }
  





}

if (!!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', "svg").createSVGRect){
  $j(document).ready($j.proxy(nytg.ready, this));
} else {
  $j("#nytg-chartFrame").hide();
  // $j("#nytg-error").show();
}



</script>
<!--END Stencil generated content. -->    </div><!--close main free form -->
<div class="insetHFullWidth">
<div id="interactiveFooter" class="opposingFloatControl wrap">
<div class="metaData element1">
<div class="module">
<p class="caption">Chart shows $3.7 trillion authorized to be spent in 2013. (Total spending is estimated to be $3.8 trillion, including funds authorized in other years). Negative budget authority, which results from fees or other collections, is shown only on the department totals tab, but is included in other totals.</p>
</div>
<div class="module">
<span class="byline">By SHAN CARTER</span>
<span class="refer feedback">
<span class="pipe">|</span>
<form name="interactivefeedback" method="post" enctype="application/x-www-form-urlencoded" action="/gst/emailus.html">
<input type="hidden" name="type" value="interactivefeedback" />
<input type="hidden" name="recipient" value="interactivefeedback" />
<input type="hidden" name="article" value="Four Ways to Slice Obama’s 2013 Budget Proposal" />
<input type="hidden" name="url" value="http://www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html" />
<a href="javascript:document.interactivefeedback.submit();">Send Feedback</a>
</form>
</span>
</div>
<div class="module">
<p class="credit">Office of Management and Budget</p>
</div>
</div><!--close .metaData element1 -->
<div class="element2">
</div><!--close .element2 -->
</div><!--close #interactiveFooter -->
</div><!--close .insetHFullWidth -->
</div><!--close .ledeStory -->
</div><!--close .columnGroup -->
</div><!--close #interactiveShell -->
</div><!--close #main -->
<div id="footer">
<ul class="first">
<li class="first"><a href="http://www.nytimes.com">Home</a></li>
<li >
<a href="http://www.nytimes.com/pages/world/index.html">World</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/national/index.html">U.S.</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/nyregion/index.html">N.Y. / Region</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/business/index.html">Business</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/technology/index.html">Technology</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/science/index.html">Science</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/health/index.html">Health</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/sports/index.html">Sports</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/opinion/index.html">Opinion</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/arts/index.html">Arts</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/style/index.html">Style</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/travel/index.html">Travel</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/jobs/index.html">Jobs</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/realestate/index.html">Real Estate</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/automobiles/index.html">Autos</a>
</li>
<li><a href="http://spiderbites.nytimes.com/">Site Map</a></li>
</ul>    <ul>
<li class="first"><a href="http://www.nytimes.com/ref/membercenter/help/copyright.html">&copy; 2012</a> <a href="http://www.nytco.com/">The New York Times Company</a></li>
<li><a href="http://www.nytimes.com/privacy">Privacy</a></li>
<li><a href="http://www.nytimes.com/ref/membercenter/help/privacy.html#pp">Your Ad Choices</a></li>
<li><a href="http://www.nytimes.com/ref/membercenter/help/agree.html">Terms of Service</a></li>
<li class="termsOfSale"><a href="http://www.nytimes.com/content/help/rights/sale/terms-of-sale.html">Terms of Sale</a></li>
<li><a href="http://www.nytimes.com/pages/corrections/index.html">Corrections</a></li>
<li><a class="rssButton" href="http://www.nytimes.com/rss">RSS</a></li>
<li><a href="http://www.nytimes.com/membercenter/sitehelp.html">Help</a></li>
<li><a href="http://www.nytimes.com/ref/membercenter/help/infoservdirectory.html">Contact Us</a></li>
<li><a href="http://www.nytco.com/careers">Work for Us</a></li>
<li><a href="http://www.nytimes.whsites.net/mediakit/">Advertise</a></li>
</ul>
</div>
</div><!--close #page -->
</div><!--close #shell -->
<script type="text/javascript" language="JavaScript" src="http://graphics8.nytimes.com/js/app/homepage/articleCommentCounts.js"></script>
<script type = "text/javascript" language = "JavaScript">
    
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Four Ways to Slice Obama’s 2013 Budget Proposal - Interactive Feature - NYTimes.com</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="robots" content="noarchive">
<meta name="hdl" content="Four Ways to Slice Obama’s 2013 Budget Proposal">
<meta name="lp" content="Explore every nook and cranny of President Obama’s federal budget proposal.">
<meta name="dat" content="February 13, 2012">
<meta name="DISPLAYDATE" content="February 13, 2012">
<meta name="pdate" content="20120213">
<meta name="col" content="">
<meta name="dsk" content="U.S. / Politics">
<meta name="cre" content="By SHAN CARTER">
<meta name="tom" content="interactive_feature">
<meta name="display-text" content="Interactive Feature">
<meta name="display-name" content="interactive">
<meta name="url_thumb" content="/images/2012/02/13/us/politics/promo-budget-75x75.png">
<meta name="url_thumb_wide" content="/images/2012/02/13/us/politics/promo-budget-190x126.png">
<meta name="ttl" content="">
<meta name="des" content="">
<meta name="per" content="">
<meta name="org" content="">
<meta name="geo" content="">
<meta name="misspelling" content="">
<meta name="keywords" content="">
<meta name="description" content="Explore every nook and cranny of President Obama’s federal budget proposal.">
<meta name="MEDIA_TEMPLATE_VERSION" content="200">
<meta name="CG" content="us">
<meta name="SCG" content="politics">
<meta name="PT" content="Multimedia">
<meta name="PST" content="Interactive">
<meta property="og:type" content="article"/>
<meta property="og:title" content="Four Ways to Slice Obama’s 2013 Budget Proposal"/>
<meta property="og:image" content="http://graphics8.nytimes.com//images/2012/02/13/us/politics/promo-budget-75x75.png"/>
<link rel="image_src" href="http://graphics8.nytimes.com/images/2012/02/13/us/politics/promo-budget-190x126.png">

<link rel="stylesheet" type="text/css" href="http://graphics8.nytimes.com/css/0.1/screen/build/interactive/us/politics/styles.css">
<link rel="stylesheet" type="text/css" media="print" href="http://graphics8.nytimes.com/css/0.1/print/styles.css">
<!--[if IE]>
        <style type="text/css">
            @import url(http://graphics8.nytimes.com/css/0.1/screen/common/ie.css);
        </style>
    <![endif]-->
<!--[if IE 6]>
        <style type="text/css">
            @import url(http://graphics8.nytimes.com/css/0.1/screen/common/ie6.css);
        </style>
    <![endif]-->
<script type="text/javascript" src="http://graphics8.nytimes.com/js/common.js"></script>
<script type="text/javascript" src="http://graphics8.nytimes.com/js/common/screen/DropDown.js"></script>
<script type="text/javascript" src="http://graphics8.nytimes.com/js/fileit.js"></script>
<script type="text/javascript" src="http://graphics8.nytimes.com/js/util/tooltip.js"></script>
<script type="text/javascript" src="http://graphics8.nytimes.com/js/article/articleShare.js"></script>
<script type="text/JavaScript">
        var static_kw = "";
        var dynamic_kw = "";
        var nyt_google_contents = dynamic_kw + static_kw;
        var nyt_google_ad_channel = "us_politics";
    </script>
</head>
<body id="interactiveABC">
<a name="top"></a>
<div id="shell">

<ul id="memberTools">

<!-- ADXINFO classification="Text_Link" campaign="inyt2014_bar1_oct_anniv_usd_4F9KW" priority="9000" isInlineSafe="Y" width="0" height="0" --><!-- INYT Sale Bar1 20140929 ~dj.paris -->
<style>
.NYT5Style .masthead-tools #bar1-singlepanel  {
    display: inline;
    vertical-align: top;
}
#bar1-singlepanel {
    border:none;
    position: relative;
}
.bar1_hover {
    opacity: 0;
}
.sub_small_hide{
    display: none;
}
#bar1-singlepanel > a {
    -moz-box-sizing: border-box;
    background-color: #6288A5;
    border: 1px solid #4D7B9F;
    border-radius: 3px;
    color: #FFFFFF !important;
    display: inline-block;
    font-size: 1em;
    font-weight: bold;
    font-family: nyt-franklin,nyt-franklin-1,'Helvetica Neue',Arial,sans-serif;
    padding: 7px 10px 6px;
    text-transform: uppercase;
    text-decoration: none;
}
#bar1-singlepanel > a:hover {
    background-color: #326891;
    border: 1px solid #265E8B;
    text-decoration: none;
}
#hovercard {
    width: 450px;
    height: 328px;
    display:none;
    margin-left: -360px;
    z-index: 99999999;
    background-color:#fff;
    border: 0;
    position:absolute;
    left: 50%;
    top: 30px;
    text-align:left;
    -moz-box-shadow: 0 0 5px #888;
    -webkit-box-shadow: 0 0 5px #888;
    box-shadow: 0 0 5px #888;
    white-space: normal;
}
#hovercard:after {
        bottom: 100%;
    left: 350px;
    border: solid transparent;
    content: " ";
    width: 0;
    height: 0;
    position: absolute;
    pointer-events: none;
    border-bottom-color: #339999;
    border-width: 8px;
    margin: 0;
}
.NYT5Style #hovercard {
        top: 18px;
}
.NYT5Style #hovercard  a:hover {
  background-color: #414042;
}
/* WEBKIT ONLY RULES */
@media screen and (-webkit-min-device-pixel-ratio:0) {
  #hovercard {
    top: 31px !important;
  }
  .NYT5Style #hovercard {
    top: 28px !important;
    margin-left: -283px;
  }
  .NYT5Style #hovercard:after {
    left: 273px;
  }
}
/* EXCLUDING NYT4 INTERACTIVES */
#interactiveABC #bar1-singlepanel {
   display: none;
}
</style>

<li id="bar1-singlepanel" class="user-subscriptions-menu user-subscriptions-group bar1_hover">
    <a id="nyt-button-sub" class="" href="http://www.nytimes.com/adx/bin/adx_click.html?type=goto&opzn&page=www.nytimes.com/interactive/yr/mo/day/us/politics&pos=Bar1&sn2=c06650d3/a7b87cdd&sn1=9de35e3f/519a0471&camp=inyt2014_bar1_oct_anniv_usd_4F9KW&ad=inyt2014_bar1_oct_anniv_usd&goto=http%3A%2F%2Finternational%2Enytimes%2Ecom%2Fsubscriptions%2Finyt%2Flp8LUQK%2Ehtml%3Fadxc%3D258024%26adxa%3D384187%26page%3Dwww.nytimes.com/interactive/yr/mo/day/us/politics%26pos%3DBar1%26campaignId%3D4F9KW" target="_blank" data-content-collection="inyt2014_bar1_oct_anniv_usd_4F9KW" data-content-placement="1">Subscribe Now</a>

    <div id="hovercard" data-campaign-name="inyt2014_bar1_oct_anniv_usd_4F9KW">
        <a href="http://www.nytimes.com/adx/bin/adx_click.html?type=goto&opzn&page=www.nytimes.com/interactive/yr/mo/day/us/politics&pos=Bar1&sn2=c06650d3/a7b87cdd&sn1=9de35e3f/519a0471&camp=inyt2014_bar1_oct_anniv_usd_4F9KW&ad=inyt2014_bar1_oct_anniv_usd&goto=http%3A%2F%2Finternational%2Enytimes%2Ecom%2Fsubscriptions%2Finyt%2Flp8LUQK%2Ehtml%3Fadxc%3D258024%26adxa%3D384187%26page%3Dwww.nytimes.com/interactive/yr/mo/day/us/politics%26pos%3DBar1%26campaignId%3D4F9KW" target="_blank" data-content-collection="inyt2014_bar1_oct_anniv_usd_4F9KW" data-content-placement="2"><img src="http://graphics8.nytimes.com/adx/images/ADS/38/41/ad.384187/bar1-oct-anniv-sale.jpg" alt=""></a>
    </div>
</li>

<!-- for small viewports -->
<!--[if gt IE 8]><!--><a id="subscribe_small" href="http://www.nytimes.com/adx/bin/adx_click.html?type=goto&opzn&page=www.nytimes.com/interactive/yr/mo/day/us/politics&pos=Bar1&sn2=c06650d3/a7b87cdd&sn1=9de35e3f/519a0471&camp=inyt2014_bar1_oct_anniv_usd_4F9KW&ad=inyt2014_bar1_oct_anniv_usd&goto=http%3A%2F%2Finternational%2Enytimes%2Ecom%2Fsubscriptions%2Finyt%2Flp8LUQK%2Ehtml%3Fadxc%3D258024%26adxa%3D384187%26page%3Dwww.nytimes.com/interactive/yr/mo/day/us/politics%26pos%3DBar1%26campaignId%3D4F9KW" class="subscribe-link sub_small_hide" data-content-collection="inyt2014_bar1_oct_anniv_usd_4F9KW" data-content-placement="1">Subscribe</a><!--<![endif]-->

<script src="http://graphics8.nytimes.com/marketing/ADX/bar1/bar1_et_inyt.js"></script>

<span class="adxInfo" style="display:none;">campaign: inyt2014_bar1_oct_anniv_usd_4F9KW -- 258024, creative: inyt2014_bar1_oct_anniv_usd -- 384187, page: www.nytimes.com/interactive/yr/mo/day/us/politics/2013-budget-proposal-graphic.html, targetedPage: www.nytimes.com/interactive/yr/mo/day/us/politics, position: Bar1</span>

 
                        <li><a id="memberToolsLogin" href="https://myaccount.nytimes.com/auth/login">Log In</a></li>
            <li><a href="https://myaccount.nytimes.com/gst/regi.html" onClick="dcsMultiTrack('WT.z_ract', 'Regnow', 'WT.z_rprod', 'Masthead');">Register Now</a></li>
                            

<li><a href="http://www.nytimes.com/membercenter/sitehelp.html">Help</a></li>
</ul>
<div class="tabsContainer">
<ul id="mainTabs" class="tabs">
<li class="first mainTabHome"><a href="http://www.nytimes.com">Home Page</a></li>
<li class="mainTabTodaysPaper"><a href="http://www.nytimes.com/pages/todayspaper/index.html">Today's Paper</a></li>
<li class="mainTabVideo"><a href="http://www.nytimes.com/video">Video</a></li>
<li class="mainTabMostPopular"><a href="http://www.nytimes.com/mostpopular">Most Popular</a></li>
<li class="mainTabTimesTopics"><a href="http://topics.nytimes.com/top/reference/timestopics">Times Topics</a></li>
</ul>
</div>
<script type="text/javascript">
window.setTimeout(function() {
  var login = document.getElementById('memberToolsLogin');
  if (login) {
    login.href += "?URI=" + window.location.href;
  }
}, 0)
</script>
<div id="page" class="tabContent active">
<div class="clearfix" id="masthead">

<div id="searchWidget">
<div class="inlineSearchControl">
<form enctype="application/x-www-form-urlencoded" action="http://query.nytimes.com/search/sitesearch" method="get" name="searchForm" id="searchForm">
<input type="hidden" value="full" name="date_select"/>
<label for="searchQuery">Search All NYTimes.com</label>
<input type="text" class="text" value="" size="" name="query" id="searchQuery"/>
<input type="hidden" id="searchAll" name="type" value="nyt"/>
<input id="searchSubmit" title="Search" width="22" height="19" alt="Search" type="image" src="http://graphics8.nytimes.com/images/global/buttons/go.gif">
</form>
</div>
</div>
<div id="branding" >

<a href="http://www.nytimes.com"><img src="http://graphics8.nytimes.com/images/misc/nytlogo152x23.gif" alt="New York Times" id="NYTLogo"/></a>

</div>
<div id="date">
<p>
<NYT_DISPLAYDATE></NYT_DISPLAYDATE>
</p>
</div>

<h2>

<a href="http://www.nytimes.com/pages/politics/index.html">Politics</a>
</h2>

</div>
<div class="navigation tabsContainer">
<ul class="tabs">
<li id="navWorld" class="first ">
<a href="http://www.nytimes.com/pages/world/index.html">World</a>
</li>   <li id="navUs" class="selected">
<a href="http://www.nytimes.com/pages/national/index.html">U.S.</a>
</li>   <li id="navNyregion" >
<a href="http://www.nytimes.com/pages/nyregion/index.html">N.Y. / Region</a>
</li>   <li id="navBusiness" >
<a href="http://www.nytimes.com/pages/business/index.html">Business</a>
</li>   <li id="navTechnology" >
<a href="http://www.nytimes.com/pages/technology/index.html">Technology</a>
</li>   <li id="navScience" >
<a href="http://www.nytimes.com/pages/science/index.html">Science</a>
</li>   <li id="navHealth" >
<a href="http://www.nytimes.com/pages/health/index.html">Health</a>
</li>   <li id="navSports" >
<a href="http://www.nytimes.com/pages/sports/index.html">Sports</a>
</li>   <li id="navOpinion" >
<a href="http://www.nytimes.com/pages/opinion/index.html">Opinion</a>
</li>   <li id="navArts" >
<a href="http://www.nytimes.com/pages/arts/index.html">Arts</a>
</li>   <li id="navStyle" >
<a href="http://www.nytimes.com/pages/style/index.html">Style</a>
</li>   <li id="navTravel" >
<a href="http://www.nytimes.com/pages/travel/index.html">Travel</a>
</li>   <li id="navJobs" >
<a href="http://www.nytimes.com/pages/jobs/index.html">Jobs</a>
</li>   <li id="navRealestate" >
<a href="http://www.nytimes.com/pages/realestate/index.html">Real Estate</a>
</li>   <li id="navAutomobiles" >
<a href="http://www.nytimes.com/pages/automobiles/index.html">Autos</a>
</li></ul>
</div>
<!--$Id: politicsSubNavigation.html 99593 2012-05-21 18:33:21Z kom $ -->
<div class="subNavigation tabContent active">
<ul class="primaryList wrap">
<li class="firstItem politicsHomeItem"><a href="http://www.nytimes.com/politics/">Politics<br>Home</a></li>
<li class="theCaucusItem"><a href="http://thecaucus.blogs.nytimes.com/">The Caucus</a></li>
<li class="fiveThirtyEightItem"><a href="http://fivethirtyeight.blogs.nytimes.com/">FiveThirty<br/>Eight</a></li>
<li class="electoralMap"><a href="http://elections.nytimes.com/2012/electoral-map">Election<br/>2012</a></li>
<li class="congressItem"><a href="http://politics.nytimes.com/congress/">Inside<br/>Congress</a></li>
<li class="pollWatchItem"><a href="http://topics.nytimes.com/top/reference/timestopics/subjects/n/newyorktimes-poll-watch/index.html">Poll<br/>Watch</a></li>
<li class="videoItem"><a href="http://video.nytimes.com/video/playlist/politics/1194811622221/index.html">Video</a></li>   
</ul>
</div>                            

<div class="singleAd" id="TopAd">
<!-- ADXINFO classification="Leaderboard_-_Standard" campaign="GOOGLE_ADX_BUSINESS_LB_14" priority="1350" isInlineSafe="N" width="728" height="90" --><center>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-4177862836555934";
/* BUSINESS_LB_14 */
google_ad_slot = "9884677559";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>
</div>

<div id="main">
<div id="interactiveShell">
<div class="columnGroup firstColumnGroup">
<div class="ledeStory">
<div class="module insetHFullWidth">
<script type="text/javascript">
var articleToolsShareData = {"url":"http:\/\/www.nytimes.com\/interactive\/2012\/02\/13\/us\/politics\/2013-budget-proposal-graphic.html","headline":"Four Ways to Slice Obama\u2019s 2013 Budget Proposal","description":"Explore every nook and cranny of President Obama\u2019s federal budget proposal.","keywords":"","section":"us","sub_section":"politics","section_display":"U.S.","sub_section_display":"Politics","byline":null,"pubdate":"February 13, 2012","passkey":null};
function getShareURL() {
    return encodeURIComponent(articleToolsShareData.url);
}
function getShareHeadline() {
    return encodeURIComponent(articleToolsShareData.headline);
}
function getShareDescription() {
    return encodeURIComponent(articleToolsShareData.description);
}
function getShareKeywords() {
    return encodeURIComponent(articleToolsShareData.keywords);
}
function getShareSection() {
    return encodeURIComponent(articleToolsShareData.section);
}
function getShareSubSection() {
    return encodeURIComponent(articleToolsShareData.sub_section);
}
function getShareSectionDisplay() {
    return encodeURIComponent(articleToolsShareData.section_display);
}
function getShareSubSectionDisplay() {
    return encodeURIComponent(articleToolsShareData.sub_section_display);
}
function getShareByline() {
    return encodeURIComponent(articleToolsShareData.byline);
}
function getSharePubdate() {
    return encodeURIComponent(articleToolsShareData.pubdate);
}
function getSharePasskey() {
    return encodeURIComponent(articleToolsShareData.passkey);
}
</script>
<div id="articleToolsTop" class="articleTools">
<div class="box">
<div class="inset">
<ul id="toolsList" class="toolsList wrap">
<li class="email">

<a id="emailThis" onClick="s_code_linktrack('Article-Tool-EmailSignIn');" 
           href="http://www.nytimes.com/auth/login?URI=http://www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html">Sign In to E-Mail</a>
</li>
<!--NYT_DYNAMIC_SPLITPAGE <li class="singlePage">-->
<A HREF="/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html?_r=1&pagewanted=all"><!--NYT_DYNAMIC_SPLITPAGE Single Page--></a>
<!--NYT_DYNAMIC_SPLITPAGE </li>-->
</ul>
</div>
</div>
</div>
<script type="text/javascript" language="JavaScript">
    writePost();
    </script>
<div class="storyHeader">
<h6 class="dateline">
<span class="timestamp">UPDATED</span> February 12, 2012                    </h6>
<h1>Four Ways to Slice Obama’s 2013 Budget Proposal</h1>
</div><!--close .storyHeader -->
<div class="storySummary">
<span class="summary">Explore every nook and cranny of President Obama's federal budget proposal.</span>
</div><!--close .storySummary -->
</div><!--end .module insetHFullWidth -->
<div id="interactiveFreeFormMain">
<!--BEGIN Stencil generated content. -->
<!--Project ID: 2012/0202-federal-budget/ -->
<!--Generated at: Mon Feb 13 18:08:54 2012 -->
<style type='text/css'>

/********************************
 ** FILE: base.css
 ********************************/

/* Structure */
.nytg {
  font-family: Arial;
}
#nytg-chartFrame{
  width: 970px;
  height: 550px;
  -webkit-transition: height ease-in-out 1s;  
  -moz-transition: height ease-in-out 1s;    
  -o-transition: height ease-in-out 1s;    
  -ms-transition: height ease-in-out 1s;        
}


#nytg-chart {
  position: relative;
  width: 100%;
  height: 100%;
}
#nytg-error {
  
  
}
#nytg-error p {
  text-align: center;
  font-size: 16px;
  line-height: 20px;
  margin: 10px;
  border: solid 1px #CCC;
  background: #ffd;
  padding: 10px;
  
}

#nytg-error a {
  text-decoration: underline;
}

#nytg-chartCanvas {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 10;
  width: 100%;
  height: 100%;
  overflow: hidden;
  
}
#nytg-chartCanvas svg {
  height: 100%;
  overflow: hidden;config/
    assets.yml
    settings.yml

}

#nytg-tooltipContainer {
  position: absolute;
  bottom: 0;
  width: 230px;
  left: -125px;
  font-size: 12px;
  line-height: 16px;
  padding: 10px;
  border-radius: 3px;
  background: rgba(255,255,255,0.9);
  color: #000;
  box-shadow: 0 1px 5px rgba(0,0,0,0.4);
  -moz-box-shadow: 0 1px 5px rgba(0,0,0,0.4);  
  border:1px solid rgba(200,200,200,0.85);
  text-align:center;
}

#nytg-tooltip {
 text-align:center;  
  z-index: 1000;
  position: absolute;
  display: none;
}

#nytg-tooltip .nytg-tail {
  position: absolute;
  bottom: -8px;
  left: 105px;
  width: 40px;
  height: 8px;
  background: url(http://graphics8.nytimes.com/packages/images/newsgraphics/2012/0202-federal-budget/tail_white.png) 50% 0%;
}
#nytg-tooltip .nytg-department {
  text-transform: uppercase;
  text-align: left;
  font-size: 10px;
  margin-bottom: 2px;
  color:#666;
  text-align:center;  

}
#nytg-tooltip .nytg-rule{
  height:1px;
  margin:1px auto 3px;
  background:#ddd;
  width:130px;
}

#nytg-tooltip .nytg-discretion{
  color:#666;
/*   text-transform:uppercase;*/
  font-size: 11px;   
  text-align:center;  
  font-style:italic;
}
#nytg-tooltip .nytg-name {
  text-align: left;
  font-size: 13px;
/*  width:170px;*/
 text-align:center;  
}
#nytg-tooltip .nytg-value {
/*  position:absolute;*/
 text-align:center;
  right:10px;
  top:28px;
  font-size: 16px;
/*  width:100px;*/
 text-align:center;  
  overflow:hidden;
  font-weight:bold;
}
#nytg-tooltip .nytg-change {
  padding-left:10px;
/*  width:110px;  */
  font-size: 16px;  
  text-align:right;  
  overflow:hidden;
/*  position:absolute;*/
  font-weight:bold;  
  color:#666;
 text-align:center;  
 display:inline;
}
#nytg-tooltip .nytg-valuesContainer {
  padding-top:7px;
  
}
#nytg-tooltip.nytg-minus .nytg-change{
  color:#900;
}
#nytg-tooltip.nytg-plus .nytg-change{
  color:#090;
}

/* Navigation */
.nytg-navBar {
  border-top: solid 1px #DDD;
  padding: 15px 0 0;
  margin: 0 10px;
  z-index: 100;
  position: absolute;
  width: 950px;
}


.nytg-navigation {
  
}
.nytg-navigation li {
  color: #999;
  font-size: 14px;
  cursor: pointer;
  float: left;
  padding: 10px 18px;
  border-top: solid 1px #CCC;
  border-bottom: solid 1px #CCC;
  border-left: solid 1px #CCC;
  background: #f9f9f9;
  margin: 0 0;
}

.nytg-navigation li:first-of-type{
  border-radius: 4px 0 0 4px;
}
.nytg-navigation li:last-of-type{

  border-right: solid 1px #CCC;
  border-radius: 0 4px 4px 0;
}
.nytg-navigation li.selected {
  color: #000;
  background: #e9e9e9;
  border-color: #AAA;
  box-shadow: inset 0px 0px 4px rgba(0,0,0,0.2);
}


/*Category List*/
#nytg-categoryBrowser li{
  cursor: pointer;
  background-image: none;
  background-color: none;
  border-bottom: solid 1px #f0f0f0;
  padding: 3px;
  margin: 0 0 1px 0;
}
#nytg-categoryBrowser li:hover {
  background-color: #f3f3f3;
}


/* Scoop Fixes */

span.noWrap.feedback {
  white-space: normal;
}

#interactiveFooter {
    border-top:1px solid #DDDDDD;
    
    margin-top:10px;
    padding-top:12px !important;
}

div.storyHeader h1 {
    font-size: 26px!important;
    margin-bottom:4px!important;
    margin-top:3px!important;
}

.ledeStory div.storySummary .summary {
  line-height: 25px;
  font-size: 15px;
/*  display: none;*/
}

.ledeStory .insetHFullWidth .storyHeader .dateline{line-height:2.4em;margin-bottom:3px;margin-top:0px;}
.insetHFullWidth #articleToolsTop{margin-bottom:0;margin-top:0px;}


/********************************
 ** FILE: overlays.css
 ********************************/

/*Overlays*/
#nytg-overlays {
  position: absolute;
  z-index: 40;
}

.nytg-overlay {
  position: absolute;  
  display:none;
  color: #666;
  
}
.nytg-overlay h5 {
  font-size: 16px;
  line-height: 16px;
  margin-bottom: 7px;
}
.nytg-overlay p {
  margin: 0;
  font-size: 12px;
  line-height: 1.45em;
}
.nytg-overlaySVG {
  width: 970px;
  height: 850px;
  position: absolute;
  z-index: 0;
}



/*Start*/
.nytg-overview {
  position: absolute;
  width: 275px;
  top:100px;
  left: 10px;
}

.nytg-overview p{
  font-size: 13px;
}

.nytg-aside {
  position: absolute;
  width: 125px;
  left: 775px;
  top: 266px;
  text-align: center;
}

.nytg-increasesLabel {
  position: absolute;
  top: 100px;
  left: 540px;
  width: 60px;
  border-top: dashed 1px rgba(0,0,0,0.2);
}
.nytg-increasesLabel span {
  position: absolute;
  right: -105px;
  top: -10px;
  width: 100px;
}
.nytg-decreasesLabel {
  position: absolute;
  top: 470px;
  left: 560px;
  width: 60px;
  border-top: dashed 1px rgba(0,0,0,0.2);
}
.nytg-decreasesLabel span {
  position: absolute;
  right: -105px;
  top: -10px;
  width: 100px;
}


#nytg-deficitCircle {
  position: absolute;
  width: 250px;
  height: 250px;
  top: 60px;
  left: 700px;
}

.nytg-deficitCircle {
  stroke-width:1;
  stroke:#999;
  stroke-dasharray:4 4;
  fill:none;
}




#nytg-colorKey {
  position: absolute;
  top: 210px;
  left: 10px;
  width: 200px;
  margin: 0;
  padding: 0;
  overflow: hidden;
}
#nytg-sizeKey {
  position: relative;
  height: 110px;
  width: 200px;
}
#nytg-scaleKey {
  width: 100%;
  height: 100%;
  position: absolute;
}

.nytg-circleKeyLabel {
  position: absolute;
  border-top: solid 1px #DDD;
  width: 40px;
}

#nytg-sizeKey .nytg-circleKeyLabel span {
  font-size: 10px;
  color: #999;
  position: absolute;
  display: block;
  left: 45px;
  top: -8px;
  width: 80px;
  z-index: 100;
}

.nytg-scaleKeyCircle {
  stroke-width:1;
  stroke:#999;
  stroke-dasharray:2 2;
  fill:none;
}

#nytg-colorKey ul {
  margin: 0;
  padding: 0;
}
#nytg-colorKey p {
  margin-bottom: 8px;
}

#nytg-colorKey li{
  background-image: none;
  padding: 0;
  margin: 0;
  float: left;
  display: block;
  height: 100%;
}

.nytg-colorSwatches{
  width: 100%;
  height: 10px;
}

.nytg-colorSwatches li {
  width: 16%;
  border-right: solid white 1px;
}

.nytg-colorTicks {
  height: 6px;
}
.nytg-colorTicks li {
  width: 16%;
  border-right: solid #CCC 1px;
}

.nytg-colorLabels {
  margin-top: 3px;
  height: 20px;
  position: relative;
  left: 8%;

}

.nytg-colorLabels li {
  width: 16%;
  text-align: center;
  font-size: 10px;
  line-height: 1em;
  padding: 4px 0 0 0!important;
  margin: 0;
}




/*Mandatory*/

#nytg-mandatoryOverlay {
  
}

.nytg-discretionaryExplainer {
  text-align: center;
  left: 550px;
  top: 100px;
  position: absolute;
  width: 340px;
}


.nytg-mandatoryExplainer {
  text-align: center;
  left: 150px;
  top: 80px;
  position: absolute;
  width: 340px;
}

.nytg-discretionaryAside {
  position: absolute;
  left: 800px;
  top: 120px;
  width: 130px;
}

.nytg-mandatoryAside {
  position: absolute;
  left: 30px;
  top: 120px;
  width: 140px;
}

/*By Change*/
#nytg-discretionaryIntro {
  top: 80px;
  left: 10px;
  width: 500px;
  position: absolute;
}
.nytg-discretionaryTickLabel {
  width: 200px;
  position: absolute;
  left: 10px;
}
.nytg-discretionaryTickLabel p {
  position:relative;
  top: -6px;
  font-size: 10px;
}
.nytg-discretionaryTick {
  position: absolute;
  border-top: dashed 1px #CCC;
  left: 60px;
  width: 900px;
}
.nytg-discretionaryTick p {
  font-size: 10px;
  text-align: left;
  position: absolute;
  left: -50px;
  width: 40px;
  top: -8px;
}
.nytg-discretionaryZeroTick {
  border-top: solid 1px #AAA;
  left: 10px;
  width: 950px;
}


/*Department*/
.nytg-departmentAnnotation {
  position: absolute;
  z-index: 1000;
}

.nytg-departmentAnnotation p {
  font-size: 12px;
  line-height: 1.2em;
  text-align: center;
  margin: 0;
  padding: 0;
}

.nytg-departmentAnnotation p.total {
  font-weight: bold;
  margin-bottom: 0.3em;
  color:#000;
}
.nytg-departmentAnnotation p.total {
  font-weight: bold;  
}

.nytg-departmentAnnotation.nytg-row0 p {
  font-size: 14px;
}
.nytg-departmentAnnotation.nytg-row0 p.total {
  font-size: 16px;
}
.nytg-departmentAnnotation.nytg-row1 p{
  font-size: 11px;
}
.nytg-departmentAnnotation.nytg-row1 p.total{
  font-size: 13px;
}

.nytg-departmentAnnotation.nytg-row2 p{
  font-size: 10px;
}
.nytg-departmentAnnotation.nytg-row2 p.total{
  font-size: 12px;
}

.nytg-departmentAnnotation.nytg-row3 p{
  font-size: 10px;
}
.nytg-departmentAnnotation.nytg-row3 p.total{
  font-size: 12px;
}
.nytg-departmentAnnotation.nytg-row4 p{
  font-size: 10px;
}
.nytg-departmentAnnotation.nytg-row4 p.total{
  font-size: 12px;
}


/*Department*/
#nytg-departmentOverlay p.nytg-emptyCircleLabel{
  position: absolute;
  left: 125px;
  top: 280px;
  width: 80px;
  text-align: center;
  color: #999;
  font-size: 11px;
  line-height: 1.45em;
  font-style: italic;
  
}




/********************************
 ** FILE: color_key.css
 ********************************/

.change-decrease3 {
  background-color: #d84b2a;
}
.change-decrease2 {
  background-color: #ee9586;
}
.change-decrease1{
  background-color: #e4b7b2;
}
.change-same {
  background-color: #CCC;
}
.change-increase1 {
  background-color: #beccae;
}
.change-increase2 {
  background-color: #9caf84;
}
.change-increase3 {
  background-color: #7aa25c;
}

/*text color for changes*/
.change-decrease3 span.label {
    color: #eeb0a2;
}
.change-decrease2 span.label {
    color: #f8d0ca;
}
.change-decrease1 span.label {
    color: #f3dfdd;
}
.change-same span.label {
    color: #FFFFFF;
}
.change-increase1 span.label {
    color: #e2e8db;
}
.change-increase2 span.label {
    color: #d3dbc9;
}
.change-increase3 span.label {
    color: #c5d6b7;
}






</style>
<div class="nytg">
<!--[if IE 6]>
  <div id="nytg-error">
  <p>This interactive graphic requires a browser with SVG support, such as <a href="http://www.google.com/chrome">Chrome</a>, <a href="http://www.mozilla.org/en-US/firefox/">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a> or the latest <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home">Internet Explorer 9</a>. </p>
  <img src="http://graphics8.nytimes.com/packages/images/newsgraphics/2012/0202-federal-budget/error.png" width="970" alt="Error">
  <div id="nytg-chartFrame" style="display:none;">
        <![endif]-->
<!--[if IE 7]>
  <div id="nytg-error">
  <p>This interactive graphic requires a browser with SVG support, such as <a href="http://www.google.com/chrome">Chrome</a>, <a href="http://www.mozilla.org/en-US/firefox/">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a> or the latest <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home">Internet Explorer 9</a>. </p>
  <img src="http://graphics8.nytimes.com/packages/images/newsgraphics/2012/0202-federal-budget/error.png" width="970" alt="Error">
  <div id="nytg-chartFrame" style="display:none;">
        <![endif]-->
<!--[if IE 8]>
  <div id="nytg-error">
  <p>This interactive graphic requires a browser with SVG support, such as <a href="http://www.google.com/chrome">Chrome</a>, <a href="http://www.mozilla.org/en-US/firefox/">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a> or the latest <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home">Internet Explorer 9</a>. </p>
  <img src="http://graphics8.nytimes.com/packages/images/newsgraphics/2012/0202-federal-budget/error.png" width="970" alt="Error">
  <div id="nytg-chartFrame" style="display:none;">
        <![endif]-->
<!--[if IE 9]>
        <div id="nytg-chartFrame">
        <![endif]-->  
<![if !IE]><div id="nytg-chartFrame"><![endif]>
<div id="nytg-chart">
<div class="nytg-navBar">
<div id="nytg-search" style="display:none;"></div>
<ul class="nytg-navigation clearfix">
<li id="nytg-nav-all">All Spending</li>
<li id="nytg-nav-mandatory">Types of Spending</li>
<li id="nytg-nav-discretionary">Changes</li>
<li id="nytg-nav-deparment">Department Totals</li>
<!--<li id="nytg-nav-comparison">Historical</li> -->
</ul>
</div>

<div id="nytg-tooltip">
<div id="nytg-tooltipContainer">
<div class="nytg-department"></div>
<div class="nytg-rule"></div>
<div class="nytg-name"></div>
<div class="nytg-discretion"></div>
<div class="nytg-valuesContainer">
<span class="nytg-value"></span>
<span class="nytg-change"></span>
</div>
<div class="nytg-chart"></div>
<div class="nytg-tail"></div>
</div>
</div>

<div id="nytg-overlays">
<div class="nytg-overlay" id="nytg-totalOverlay" >
<div class="nytg-overview">
<h5>How $3.7 Trillion Is Spent</h5>
<p>Mr. Obama's budget proposal includes $3.7 trillion in spending in 2013, and forecasts a $901 billion deficit.</p>
<svg id="nytg-deficitCircle"></svg>
</div>

<div class="nytg-aside">
<p>The proposal forecasts a $901 billion deficit.</p>
</div>
<div class="nytg-increasesLabel">
<span>Largest Increases</span>
</div>
<div class="nytg-decreasesLabel">
<span>Largest Cuts</span>
</div>
<div id="nytg-colorKey">
<p>Circles are sized according to the proposed spending.</p>
<div id="nytg-sizeKey">
<div style="left:52px;top:10px;width:20px;" class="nytg-circleKeyLabel"><span style="left:25px;">$100 billion</span></div>
<div style="left:32px;top:42px;" class="nytg-circleKeyLabel"><span>$10 billion</span></div>
<div style="left:32px;top:57px;" class="nytg-circleKeyLabel"><span>$1 billion</span></div>
<svg id="nytg-scaleKey"></svg>
</div>
<p>Color shows amount of cut or increase from 2012.</p>
<ul class="nytg-colorSwatches">
<li class="change-decrease3"></li>
<li class="change-decrease2"></li>
<li class="change-decrease1"></li>
<li class="change-increase1"></li>
<li class="change-increase2"></li>
<li class="change-increase3"></li>
</ul>
<ul class="nytg-colorTicks">
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<ul class="nytg-colorLabels">
<li>&ndash;25%</li>
<li>&ndash;5%</li>
<li>0</li>
<li>+5%</li>
<li>+25%</li>
</ul>
</div>
</div>
<div class="nytg-overlay" id="nytg-mandatoryOverlay" >
<div class="nytg-mandatoryExplainer">
</div>
<div class="nytg-mandatoryAside">
<h5>Mandatory</h5>
<p><strong style="font-size:16px;padding-bottom:4px;display:block;">$2.5 trillion</strong></p>
<p>About 70 percent of budgetary spending is controlled by existing laws, including entitlements like Medicare, Medicaid and Social Security.</p>
</div>
<div class="nytg-discretionaryExplainer">
</div>
<div class="nytg-discretionaryAside">
<h5>Discretionary</h5>
<p><strong style="font-size:16px;padding-bottom:4px;display:block;">$1.1 trillion</strong></p>
<p>Only about 30 percent of the budget is controlled by the annual budget process. Last August, the White House and Congress agreed to a cap on this spending.</p>
</div>
</div>
<div class="nytg-overlay" id="nytg-discretionaryOverlay" >
<div id="nytg-discretionaryIntro">
<h5>Changes to Discretionary Spending</h5>
<p>Discretionary spending is controlled by the annual budget process. The White House and Congress agreed to a cap in spending in August, so proposed increases in categories like education and energy require cuts in other areas.</p>
</div>
</div>
<div class="nytg-overlay" id="nytg-departmentOverlay" >
<p class="nytg-emptyCircleLabel">Empty circles show income.</p>
</div>
<div class="nytg-overlay" id="nytg-comparisonOverlay" >
<h5>Comparison Overlay</h5>
</div>
</div>
<div id="nytg-chartCanvas"></div>
</div>
</div>
</div>
<script type="text/javascript" charset="utf-8">
  var nytg = nytg || {};
  
</script>
<script type='text/javascript'>

/********************************
 ** FILE: Javascript templates
 ********************************/

var nytg = nytg || {};

</script>
<script type='text/javascript'>

/********************************
 ** FILE: lib/jquery.js
 ********************************/

// NOTE: nytg Additions at bottom of file

/*! jQuery v1.7.1 jquery.com | jquery.org/license */


// BEGIN nytg Additions
jQuery.noConflict();
var $j = jQuery;
// END nytg Additions


/********************************
 ** FILE: lib/d3.min.js
 ********************************/









/********************************
 ** FILE: lib/nytg.js
 ********************************/

var nytg = nytg || {};

nytg.formatNumber = function(n,decimals) {
    var s, remainder, num, negativePrefix, negativeSuffix, prefix, suffix;
    suffix = ""
    negativePrefix = ""
    negativeSuffix = ""
    if (n < 0) {
      negativePrefix = "";
      negativeSuffix = " in income"
      n = -n
    };
    
    if (n >= 1000000000000) {
        suffix = " trillion"
        n = n / 1000000000000
        decimals = 2
    } else if (n >= 1000000000) {
        suffix = " billion"
        n = n / 1000000000
        decimals = 1
    } else if (n >= 1000000) {
        suffix = " million"
        n = n / 1000000
        decimals = 1
    } 
    
    
    prefix = ""
    if (decimals > 0) {
        if (n<1) {prefix = "0"};
        s = String(Math.round(n * (Math.pow(10,decimals))));
        if (s < 10) {
            remainder = "0" + s.substr(s.length-(decimals),decimals);
            num = "";
        } else{
            remainder = s.substr(s.length-(decimals),decimals);
            num = s.substr(0,s.length - decimals);
        }
        
        
        return  negativePrefix + prefix + num.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") + "." + remainder + suffix + negativeSuffix;
    } else {
        s = String(Math.round(n));
        s = s.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
        return  negativePrefix + s + suffix + negativeSuffix;
    }
};



/********************************
 ** FILE: Chart.js
 ********************************/

var nytg = nytg || {};

nytg.Chart = function(){
  return {
    $j : jQuery,
    //defaults
    width           : 970,
    height          : 850,
    groupPadding    : 10,
    totalValue      : 3700000000,
    deficitValue    : 901000000,
    // CONST
    MANDATORY       : "Mandatory",
    DISCRETIONARY   : "Discretionary",
    NET_INTEREST    : "Net interest",

    
    //will be calculated later
    boundingRadius  : null,
    maxRadius       : null,
    centerX         : null,
    centerY         : null,
    scatterPlotY    : null,
        
    //d3 settings
    defaultGravity  : 0.1,
    defaultCharge   : function(d){
                        if (d.value < 0) {
                          return 0
                        } else {
                          return -Math.pow(d.radius,2.0)/8 
                        };
                      },
    links           : [],
    nodes           : [],
    positiveNodes   : [],
    force           : {},
    svg             : {},
    circle          : {},
    gravity         : null,
    charge          : null,
    changeTickValues: [-0.25, -0.15, -0.05, 0.05, 0.15, 0.25],
    categorizeChange: function(c){
                        if (isNaN(c)) { return 0;
                        } else if ( c < -0.25) { return -3;
                        } else if ( c < -0.05){ return -2;
                        } else if ( c < -0.001){ return -1;
                        } else if ( c <= 0.001){ return 0;
                        } else if ( c <= 0.05){ return 1;
                        } else if ( c <= 0.25){ return 2;
                        } else { return 3; }
                      },
    fillColor       : d3.scale.ordinal().domain([-3,-2,-1,0,1,2,3]).range(["#d84b2a", "#ee9586","#e4b7b2","#AAA","#beccae", "#9caf84", "#7aa25c"]),
    strokeColor     : d3.scale.ordinal().domain([-3,-2,-1,0,1,2,3]).range(["#c72d0a", "#e67761","#d9a097","#999","#a7bb8f", "#7e965d", "#5a8731"]),
    getFillColor    : null,
    getStrokeColor  : null,
    pFormat         : d3.format("+.1%"),
    pctFormat       : function(){return false},
    tickChangeFormat: d3.format("+%"),
    simpleFormat    : d3.format(","),
    simpleDecimal   : d3.format(",.2f"),

    bigFormat       : function(n){return nytg.formatNumber(n*1000)},
    nameFormat      : function(n){return n},
    discretionFormat: function(d){
                        if (d == 'Discretionary' || d == 'Mandatory') {
                          return d + " spending"
                        } else {return d}
                      },  
    
    rScale          : d3.scale.pow().exponent(0.5).domain([0,1000000000]).range([1,90]),
    radiusScale     : null,
    changeScale     : d3.scale.linear().domain([-0.28,0.28]).range([620,180]).clamp(true),
    sizeScale       : d3.scale.linear().domain([0,110]).range([0,1]),
    groupScale      : {},
    
    //data settings
    currentYearDataColumn   : 'budget_2013',
    previousYearDataColumn  : 'budget_2012',
    data                    : nytg.budget_array_data,
    categoryPositionLookup  : {},
    categoriesList          : [],
    
    // 
    // 
    // 
    init: function() {
      var that = this;
      
      this.scatterPlotY = this.changeScale(0);
      
      this.pctFormat = function(p){
        if (p === Infinity ||p === -Infinity) {
          return "N.A."
        } else {
          return that.pFormat(p)
        }
        
      }
      
      this.radiusScale = function(n){ return that.rScale(Math.abs(n)); };
      this.getStrokeColor = function(d){
        // if (d.isNegative) {
        //   return "#333"
        // }
        return that.strokeColor(d.changeCategory);
      };
      this.getFillColor = function(d){
        if (d.isNegative) {
          return "#fff"
        }
        return that.fillColor(d.changeCategory);
      };
      
      this.boundingRadius = this.radiusScale(this.totalValue);
      this.centerX = this.width / 2;
      this.centerY = 300;
      
      nytg.category_data.sort(function(a, b){  
        return b['total'] - a['total'];  
      });
      
      //calculates positions of the category clumps
      //it is probably overly complicated
      var columns = [4, 7, 9, 9]
          rowPadding = [150, 100, 90, 80, 70],
          rowPosition = [220, 450, 600, 720, 817],
          rowOffsets = [130, 80, 60, 45, 48]
          currentX = 0,
          currentY = 0;
      for (var i=0; i < nytg.category_data.length; i++) {
        var t = 0, 
            w,
            numInRow = -1,
            positionInRow = -1,
            currentRow = -1,
            cat = nytg.category_data[i]['label'];
        // calc num in this row
        for (var j=0; j < columns.length; j++) {
          if (i < (t + columns[j])) {
            numInRow = columns[j];
            positionInRow = i - t;
            currentRow = j;
            break;
          };
          t += columns[j];
        };
        if (numInRow === -1) {
          numInRow = nytg.category_data.length - d3.sum(columns);
          currentRow = columns.length;
          positionInRow = i  - d3.sum(columns)
        };
        nytg.category_data[i].row = currentRow;
        nytg.category_data[i].column = positionInRow;
        w = (this.width - 2*rowPadding[currentRow]) / (numInRow-1)
        currentX = w * positionInRow + rowPadding[currentRow];
        currentY = rowPosition[currentRow];
        this.categoriesList.push(cat);
        this.categoryPositionLookup[cat] = {
          x:currentX, 
          y:currentY,
          w: w*0.9,
          offsetY: rowOffsets[currentRow],
          numInRow:numInRow,
          positionInRow:positionInRow
        }        
      };
      
      //
      this.groupScale = d3.scale.ordinal().domain(this.categoriesList).rangePoints([0,1]);
      
      // Builds the nodes data array from the original data
      for (var i=0; i < this.data.length; i++) {
        var n = this.data[i];
        var out = {
          sid: n['id'],
          radius: this.radiusScale(n[this.currentYearDataColumn]),
          group: n['department'],
          change: n['change'],
          changeCategory: this.categorizeChange(n['change']),
          value: n[this.currentYearDataColumn],
          name: n['name'],
          discretion: n['discretion'],
          isNegative: (n[this.currentYearDataColumn] < 0),
          positions: n.positions,
          x:Math.random() * 1000,
          y:Math.random() * 1000
        }
        if (n.positions.total) {
          out.x = n.positions.total.x + (n.positions.total.x - (that.width / 2)) * 0.5;
          out.y = n.positions.total.y + (n.positions.total.y - (150)) * 0.5;
        };
        if ((n[this.currentYearDataColumn] > 0)!==(n[this.previousYearDataColumn] > 0)) {
          out.change = "N.A.";
          out.changeCategory = 0;
        };
        this.nodes.push(out)
      };
      
      this.nodes.sort(function(a, b){  
        return Math.abs(b.value) - Math.abs(a.value);  
      });
      
      for (var i=0; i < this.nodes.length; i++) {
        if(!this.nodes[i].isNegative ){
          this.positiveNodes.push(this.nodes[i])
        }
      };
      
      this.svg = d3.select("#nytg-chartCanvas").append("svg:svg")
        .attr("width", this.width);
      
        for (var i=0; i < this.changeTickValues.length; i++) {
          d3.select("#nytg-discretionaryOverlay").append("div")
            .html("<p>"+this.tickChangeFormat(this.changeTickValues[i])+"</p>")
            .style("top", this.changeScale(this.changeTickValues[i])+'px')
            .classed('nytg-discretionaryTick', true)
            .classed('nytg-discretionaryZeroTick', (this.changeTickValues[i] === 0) )
        };
        d3.select("#nytg-discretionaryOverlay").append("div")
          .html("<p></p>")
          .style("top", this.changeScale(0)+'px')
          .classed('nytg-discretionaryTick', true)
          .classed('nytg-discretionaryZeroTick', true)
        d3.select("#nytg-discretionaryOverlay").append("div")
          .html("<p>+26% or higher</p>")
          .style("top", this.changeScale(100)+'px')
          .classed('nytg-discretionaryTickLabel', true)
        d3.select("#nytg-discretionaryOverlay").append("div")
          .html("<p>&minus;26% or lower</p>")
          .style("top", this.changeScale(-100)+'px')
          .classed('nytg-discretionaryTickLabel', true)
        
          
      
      // total circle
      // this.svg.append("circle")
      //   .attr('r', this.radiusScale(this.totalValue))
      //   .style("stroke-width",1)
      //   .style('stroke',"#AAA")
      //   .style('fill','none')
      //   .attr('cx', this.width/2)
      //   .attr('cy', this.height/2);
        
      // deficit circle
      d3.select("#nytg-deficitCircle").append("circle")
        .attr('r', this.radiusScale(this.deficitValue))
        .attr('class',"nytg-deficitCircle")
        .attr('cx', 125)
        .attr('cy', 125);
        
        
      d3.select("#nytg-scaleKey").append("circle")
        .attr('r', this.radiusScale(100000000))
        .attr('class',"nytg-scaleKeyCircle")
        .attr('cx', 30)
        .attr('cy', 30);
      d3.select("#nytg-scaleKey").append("circle")
        .attr('r', this.radiusScale(10000000))
        .attr('class',"nytg-scaleKeyCircle")
        .attr('cx', 30)
        .attr('cy', 50);
      d3.select("#nytg-scaleKey").append("circle")
        .attr('r', this.radiusScale(1000000))
        .attr('class',"nytg-scaleKeyCircle")
        .attr('cx', 30)
        .attr('cy', 55);
      
        
      var departmentOverlay = $j("#nytg-departmentOverlay")
      
      for (var i=0; i < nytg.category_data.length; i++) {
        var cat = nytg.category_data[i]['label']
        var catLabel = nytg.category_data[i]['short_label']
        var catTot = this.bigFormat(nytg.category_data[i]['total'])
        var catWidth = this.categoryPositionLookup[cat].w
        var catYOffset = this.categoryPositionLookup[cat].offsetY;
        var catNode;
        if (catLabel === "Other") {
          catNode = $j("<div class='nytg-departmentAnnotation nytg-row"+nytg.category_data[i]['row']+"'><p class='department'>"+catLabel+"</p></div>")
          
        } else {
          catNode = $j("<div class='nytg-departmentAnnotation nytg-row"+nytg.category_data[i]['row']+"'><p class='total'>$"+catTot+"</p><p class='department'>"+catLabel+"</p></div>")
          
        }
          catNode.css({'left':this.categoryPositionLookup[cat].x-catWidth/2,'top': this.categoryPositionLookup[cat].y - catYOffset, 'width':catWidth})
        departmentOverlay.append(catNode)
          
      };
      
      // This is the every circle
      this.circle = this.svg.selectAll("circle")
          .data(this.nodes, function(d) { return d.sid; });
          
      this.circle.enter().append("svg:circle")
        .attr("r", function(d) { return 0; } )
        .style("fill", function(d) { return that.getFillColor(d); } )
        .style("stroke-width", 1)
        .attr('id',function(d){ return 'nytg-circle'+d.sid })
        .style("stroke", function(d){ return that.getStrokeColor(d); })
        .on("mouseover",function(d,i) { 
          var el = d3.select(this)
          var xpos = Number(el.attr('cx'))
          var ypos = (el.attr('cy') - d.radius - 10)
          el.style("stroke","#000").style("stroke-width",3);
          d3.select("#nytg-tooltip").style('top',ypos+"px").style('left',xpos+"px").style('display','block')
            .classed('nytg-plus', (d.changeCategory > 0))
            .classed('nytg-minus', (d.changeCategory < 0));
          d3.select("#nytg-tooltip .nytg-name").html(that.nameFormat(d.name))

          d3.select("#nytg-tooltip .nytg-discretion").text(that.discretionFormat(d.discretion))
          d3.select("#nytg-tooltip .nytg-department").text(d.group)
          d3.select("#nytg-tooltip .nytg-value").html("$"+that.bigFormat(d.value))
          
          var pctchngout = that.pctFormat(d.change)
          if (d.change == "N.A.") {
            pctchngout = "N.A."
          };
          d3.select("#nytg-tooltip .nytg-change").html(pctchngout) })
        .on("mouseout",function(d,i) { 
          d3.select(this)
          .style("stroke-width",1)
          .style("stroke", function(d){ return that.getStrokeColor(d); })
          d3.select("#nytg-tooltip").style('display','none')});
      
            
      this.circle.transition().duration(2000).attr("r", function(d){return d.radius})
      
    },
    
    
    
    
    // 
    // 
    // 
    getCirclePositions: function(){
      var that = this
      var circlePositions = {};
      this.circle.each(function(d){
        
        circlePositions[d.sid] = {
          x:Math.round(d.x),
          y:Math.round(d.y)
        }
        
        
      })
      return JSON.stringify(circlePositions)
    },
    
    
    
    // 
    // 
    // 
    start: function() {
      var that = this;

      this.force = d3.layout.force()
        .nodes(this.nodes)
        .size([this.width, this.height])
        
      // this.circle.call(this.force.drag)
      
    },
    
    

    
    // 
    // 
    // 
    totalLayout: function() {
      var that = this;
      this.force
        .gravity(-0.01)
        .charge(that.defaultCharge)
        .friction(0.9)
        .on("tick", function(e){
          that.circle
            .each(that.totalSort(e.alpha))
            .each(that.buoyancy(e.alpha))
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
        })
        .start();
      
    },
    
    // 
    // 
    // 
    mandatoryLayout: function() {
      var that = this;
      this.force
        .gravity(0)
        .friction(0.9)
        .charge(that.defaultCharge)
        .on("tick", function(e){
          that.circle
            .each(that.mandatorySort(e.alpha))
            .each(that.buoyancy(e.alpha))
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
        })
        .start();
      
    },
    
    // 
    // 
    // 
    discretionaryLayout: function() {
      var that = this;
      this.force
        .gravity(0)
        .charge(0)
        .friction(0.2)
        .on("tick", function(e){
          that.circle
            .each(that.discretionarySort(e.alpha))
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
        })
        .start();
    },
    
    
    // 
    // 
    // 
    departmentLayout: function() {
      var that = this;
      this.force
        .gravity(0)
        .charge(1)
        .friction(0)
        .on("tick", function(e){
          that.circle
            // .each(that.departmentSort(e.alpha))
            // .each(that.collide(0.5))
            .each(that.staticDepartment(e.alpha))
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
        })
        .start();
    },
    
    
    // 
    // 
    // 
    comparisonLayout: function() {
      var that = this;
      this.force
        .gravity(0)
        .charge(that.defaultCharge)
        .friction(0.9)
        .on("tick", function(e){
          that.circle
            .each(that.comparisonSort(e.alpha))
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
        })
        .start();
      
    },
    
    
    // ----------------------------------------------------------------------------------------
    // FORCES
    // ----------------------------------------------------------------------------------------
    
    
    // 
    // 
    // 
    totalSort: function(alpha) {
      var that = this;
      return function(d){
        var targetY = that.centerY;
        var targetX = that.width / 2;
        
        
        if (d.isNegative) {
          if (d.changeCategory > 0) {
            d.x = - 200
          } else {
            d.x =  1100
          }
        }
        
        // if (d.positions.total) {
        //   targetX = d.positions.total.x
        //   targetY = d.positions.total.y
        // };
        
        
        
        // 
        d.y = d.y + (targetY - d.y) * (that.defaultGravity + 0.02) * alpha
        d.x = d.x + (targetX - d.x) * (that.defaultGravity + 0.02) * alpha
        
      };
    },
    
    // 
    // 
    // 
    buoyancy: function(alpha) {
      var that = this;
      return function(d){
          // d.y -= 1000 * alpha * alpha * alpha * d.changeCategory
          
          // if (d.changeCategory >= 0) {
          //   d.y -= 1000 * alpha * alpha * alpha
          // } else {
          //   d.y += 1000 * alpha * alpha * alpha
          // }
          
          
          var targetY = that.centerY - (d.changeCategory / 3) * that.boundingRadius
          d.y = d.y + (targetY - d.y) * (that.defaultGravity) * alpha * alpha * alpha * 100
          
          
          
      };
    },
    
    
    
    // 
    // 
    // 
    mandatorySort: function(alpha) {
      var that = this;
      return function(d){
        var targetY = that.centerY;
        var targetX = 0;
        
        if (d.isNegative) {
          if (d.changeCategory > 0) {
            d.x = - 200
          } else {
            d.x =  1100
          }
          return;
        }
        
        
        if (d.discretion === that.DISCRETIONARY) {
          targetX = 550
        } else if ((d.discretion === that.MANDATORY)||(d.discretion === that.NET_INTEREST)) {
          targetX = 400
        } else {
          targetX = 900
        };
        
        
        
        
        d.y = d.y + (targetY - d.y) * (that.defaultGravity) * alpha * 1.1
        d.x = d.x + (targetX - d.x) * (that.defaultGravity) * alpha * 1.1
      };
    },
    
    
    // 
    // 
    // 
    discretionarySort: function(alpha) {
      var that = this;
      return function(d){
        var targetY = that.height / 2;
        var targetX = 0;
        
        if (d.isNegative) {
          if (d.changeCategory > 0) {
            d.x = - 200
          } else {
            d.x =  1100
          }
          return;
        }
        
        
        if (d.discretion === "Discretionary") {
          targetY = that.changeScale(d.change);
          targetX = 100 + that.groupScale(d.group)*(that.width - 120);
          if (isNaN(targetY)) {targetY = that.centerY};
          if (targetY > (that.height-80)) {targetY = that.height-80};
          if (targetY < 80) {targetY = 80};
          
        } else if ((d.discretion === "Mandatory")||(d.discretion === "Net interest")) {
          targetX = -300 + Math.random()* 100;
          targetY = d.y;
        } else {
          targetX = 0
        };
        
        d.y = d.y + (targetY - d.y) * Math.sin(Math.PI * (1 - alpha*10)) * 0.2
        d.x = d.x + (targetX - d.x) * Math.sin(Math.PI * (1 - alpha*10)) * 0.1
      };
    },
    
    
    // 
    // 
    // 
    departmentSort: function(alpha){
      var that = this;
      return function(d){
        var targetY = 0,
            targetX = 0;
        
        if (that.categoryPositionLookup[d.group]) {
          targetY = that.categoryPositionLookup[d.group].y;
          targetX = that.categoryPositionLookup[d.group].x;
        } else {
        };
        
        
        var r =  Math.max(5, d.radius)
        d.y = d.y + (targetY - d.y) * (that.defaultGravity) * alpha * 0.5 * r
        d.x = d.x + (targetX - d.x) * (that.defaultGravity) * alpha * 0.5 * r
        
      };
    },
    
    
    
    
    // 
    // 
    // 
    staticDepartment: function(alpha) {
      var that = this;
      return function(d){
        var targetY = 0;
        var targetX = 0;
        
        if (d.positions.department) {
          targetX = d.positions.department.x;
          targetY = d.positions.department.y;
        };
        
        d.y += (targetY - d.y) * Math.sin(Math.PI * (1 - alpha*10)) * 0.6
        d.x += (targetX - d.x) * Math.sin(Math.PI * (1 - alpha*10)) * 0.4
      };
    },
    
    // 
    // 
    // 
    comparisonSort: function(alpha) {
      var that = this;
      return function(d){
        var targetY = that.height / 2;
        var targetX = 650;
        
        
        d.y = d.y + (targetY - d.y) * (that.defaultGravity) * alpha
        d.x = d.x + (targetX - d.x) * (that.defaultGravity) * alpha
      };
    },
    
    
    
    // 
    // 
    // 
    collide: function(alpha){
      var that = this;
      var padding = 6;
      var quadtree = d3.geom.quadtree(this.nodes);
      return function(d) {
        var r = d.radius + that.maxRadius + padding,
            nx1 = d.x - r,
            nx2 = d.x + r,
            ny1 = d.y - r,
            ny2 = d.y + r;
        quadtree.visit(function(quad, x1, y1, x2, y2) {
          if (quad.point && (quad.point !== d) && (d.group === quad.point.group)) {
            var x = d.x - quad.point.x,
                y = d.y - quad.point.y,
                l = Math.sqrt(x * x + y * y),
                r = d.radius + quad.point.radius;
            if (l < r) {
              l = (l - r) / l * alpha;
              d.x -= x *= l;
              d.y -= y *= l;
              quad.point.x += x;
              quad.point.y += y;
            }
          }
          return x1 > nx2
              || x2 < nx1
              || y1 > ny2
              || y2 < ny1;
        });
      };
        
    }
    
  }
};

  
  




/********************************
 ** FILE: ChooseList.js
 ********************************/

var nytg = nytg || {};
var $j = jQuery;

nytg.ChooseList = function(node, changeCallback) {
  this.container = $j(node);
  this.selectedNode = null;
  this.currentIndex = null;
  this.onChange = changeCallback;
  this.elements = this.container.find('li');
  this.container.find('li').on('click',$j.proxy(this.onClickHandler, this));
  this.selectByIndex(0);
};

nytg.ChooseList.prototype.onClickHandler = function(evt) {
  evt.preventDefault();
  this.selectByElement(evt.currentTarget);
};


nytg.ChooseList.prototype.selectByIndex = function(i) {
  this.selectByElement(this.elements[i])
};


nytg.ChooseList.prototype.selectByElement = function(el) {
  if (this.selectedNode) {
    $j(this.selectedNode).removeClass("selected");
  };
  $j(el).addClass("selected");
  for (var i=0; i < this.elements.length; i++) {
    if (this.elements[i] === el) {
      this.currentIndex = i;
    }
  };
  this.selectedNode = el;
  this.onChange(this);
};



/********************************
 ** FILE: base.js
 ********************************/

var $j = jQuery;

nytg.filename = function(index){
  var tabs = [
  "total",
  "mandatory",
  "discretionary",
  "department"];
  return tabs[index];
}
$j("#save").click(function(){
  $j.ajax({ 
    type: "POST", 
    url: "/save", 
    data: {
      'filename':nytg.filename(nytg.mainNav.currentIndex),
      'contents':nytg.c.getCirclePositions()
    }
  });
  
})


  
nytg.ready = function() {
  var that = this;
  nytg.c = new nytg.Chart();
  nytg.c.init();
  nytg.c.start();
  
  this.highlightedItems = [];
  
  // nytg.s = new nytg.SearchBox("nytg-search", nytg.budget_array_data, "name", "department", "budget_2012", "id");
  // nytg.s.findCallback = function(evt){
  //   var foundId = evt.id;    
  //   
  //   for (var i=0; i < that.highlightedItems.length; i++) {
  //     $j("#nytg-circle"+that.highlightedItems[i]).css({'stroke-width':1});
  //   };
  // 
  //   that.highlightedItems = [evt.id];
  //   for (var i=0; i < that.highlightedItems.length; i++) {
  //     $j("#nytg-circle"+that.highlightedItems[i]).css({'stroke-width':20});
  //   };
  //   
  // }

  
  

  var currentOverlay = undefined;
  nytg.mainNav = new nytg.ChooseList($j(".nytg-navigation"), onMainChange);
  function onMainChange(evt) {
    var tabIndex = evt.currentIndex
    if (this.currentOverlay !== undefined) {
      this.currentOverlay.hide();
    };
    if (tabIndex === 0) {
      nytg.c.totalLayout();
      this.currentOverlay = $j("#nytg-totalOverlay");
      this.currentOverlay.delay(300).fadeIn(500);
      $j("#nytg-chartFrame").css({'height':550});
    } else if (tabIndex === 1){
      nytg.c.mandatoryLayout();
      this.currentOverlay = $j("#nytg-mandatoryOverlay");
      this.currentOverlay.delay(300).fadeIn(500);
      $j("#nytg-chartFrame").css({'height':550});
    } else if (tabIndex === 2){
      nytg.c.discretionaryLayout();
      this.currentOverlay = $j("#nytg-discretionaryOverlay");
      this.currentOverlay.delay(300).fadeIn(500);
      $j("#nytg-chartFrame").css({'height':650});
    } else if (tabIndex === 4){
      nytg.c.comparisonLayout();
      this.currentOverlay = $j("#nytg-comparisonOverlay");
      this.currentOverlay.delay(300).fadeIn(500);
      $j("#nytg-chartFrame").css({'height':650});
    } else if (tabIndex === 3){
      nytg.c.departmentLayout();
      this.currentOverlay = $j("#nytg-departmentOverlay");
      this.currentOverlay.delay(300).fadeIn(500);
      $j("#nytg-chartFrame").css({'height':850});
    }
    
  }
  





}

if (!!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', "svg").createSVGRect){
  $j(document).ready($j.proxy(nytg.ready, this));
} else {
  $j("#nytg-chartFrame").hide();
  // $j("#nytg-error").show();
}



</script>
<!--END Stencil generated content. -->    </div><!--close main free form -->
<div class="insetHFullWidth">
<div id="interactiveFooter" class="opposingFloatControl wrap">
<div class="metaData element1">
<div class="module">
<p class="caption">Chart shows $3.7 trillion authorized to be spent in 2013. (Total spending is estimated to be $3.8 trillion, including funds authorized in other years). Negative budget authority, which results from fees or other collections, is shown only on the department totals tab, but is included in other totals.</p>
</div>
<div class="module">
<span class="byline">By SHAN CARTER</span>
<span class="refer feedback">
<span class="pipe">|</span>
<form name="interactivefeedback" method="post" enctype="application/x-www-form-urlencoded" action="/gst/emailus.html">
<input type="hidden" name="type" value="interactivefeedback" />
<input type="hidden" name="recipient" value="interactivefeedback" />
<input type="hidden" name="article" value="Four Ways to Slice Obama’s 2013 Budget Proposal" />
<input type="hidden" name="url" value="http://www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html" />
<a href="javascript:document.interactivefeedback.submit();">Send Feedback</a>
</form>
</span>
</div>
<div class="module">
<p class="credit">Office of Management and Budget</p>
</div>
</div><!--close .metaData element1 -->
<div class="element2">
</div><!--close .element2 -->
</div><!--close #interactiveFooter -->
</div><!--close .insetHFullWidth -->
</div><!--close .ledeStory -->
</div><!--close .columnGroup -->
</div><!--close #interactiveShell -->
</div><!--close #main -->
<div id="footer">
<ul class="first">
<li class="first"><a href="http://www.nytimes.com">Home</a></li>
<li >
<a href="http://www.nytimes.com/pages/world/index.html">World</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/national/index.html">U.S.</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/nyregion/index.html">N.Y. / Region</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/business/index.html">Business</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/technology/index.html">Technology</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/science/index.html">Science</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/health/index.html">Health</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/sports/index.html">Sports</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/opinion/index.html">Opinion</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/arts/index.html">Arts</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/style/index.html">Style</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/travel/index.html">Travel</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/jobs/index.html">Jobs</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/realestate/index.html">Real Estate</a>
</li>
<li >
<a href="http://www.nytimes.com/pages/automobiles/index.html">Autos</a>
</li>
<li><a href="http://spiderbites.nytimes.com/">Site Map</a></li>
</ul>    <ul>
<li class="first"><a href="http://www.nytimes.com/ref/membercenter/help/copyright.html">&copy; 2012</a> <a href="http://www.nytco.com/">The New York Times Company</a></li>
<li><a href="http://www.nytimes.com/privacy">Privacy</a></li>
<li><a href="http://www.nytimes.com/ref/membercenter/help/privacy.html#pp">Your Ad Choices</a></li>
<li><a href="http://www.nytimes.com/ref/membercenter/help/agree.html">Terms of Service</a></li>
<li class="termsOfSale"><a href="http://www.nytimes.com/content/help/rights/sale/terms-of-sale.html">Terms of Sale</a></li>
<li><a href="http://www.nytimes.com/pages/corrections/index.html">Corrections</a></li>
<li><a class="rssButton" href="http://www.nytimes.com/rss">RSS</a></li>
<li><a href="http://www.nytimes.com/membercenter/sitehelp.html">Help</a></li>
<li><a href="http://www.nytimes.com/ref/membercenter/help/infoservdirectory.html">Contact Us</a></li>
<li><a href="http://www.nytco.com/careers">Work for Us</a></li>
<li><a href="http://www.nytimes.whsites.net/mediakit/">Advertise</a></li>
</ul>
</div>
</div><!--close #page -->
</div><!--close #shell -->
<script type="text/javascript" language="JavaScript" src="http://graphics8.nytimes.com/js/app/homepage/articleCommentCounts.js"></script>
<script type = "text/javascript" language = "JavaScript">
   </script>    <script type="text/javascript" language="JavaScript">
    ArticleCommentCounts.apply()
    </script>







<IMG CLASS="hidden" SRC="/adx/bin/clientside/6c90ae25Q2FMMMMMMeMeDQ26EDhlf9MMMMMMMMeffeQ2BQ25Q25r9MMeMr8he9fQ2B" height="1" width="3">


            
        <!-- Start UPT call -->
        <img height="1" width="3" border=0 src="http://up.nytimes.com/?d=0//&t=6&s=0&ui=0&r=&u=www%2enytimes%2ecom%2finteractive%2f2012%2f02%2f13%2fus%2fpolitics%2f2013%2dbudget%2dproposal%2dgraphic%2ehtml%3f%5fr%3d1">
        <!-- End UPT call -->
    
        
        <script language="JavaScript"><!--
          var dcsvid="0";
          var regstatus="non-registered";
        //--></script>
        <script src="http://graphics8.nytimes.com/js/app/analytics/trackingTags_v1.1.js" type="text/javascript"></script>
        <noscript>
          <div><img alt="DCSIMG" id="DCSIMG" width="1" height="1" src="http://wt.o.nytimes.com/dcsym57yw10000s1s8g0boozt_9t1x/njs.gif?dcsuri=/nojavascript&amp;WT.js=No&amp;WT.tv=1.0.7"/></div>
        </noscript>
   
</body>
</html>


</script>    <script type="text/javascript" language="JavaScript">
    ArticleCommentCounts.apply()
    </script>







<IMG CLASS="hidden" SRC="/adx/bin/clientside/6c90ae25Q2FMMMMMMeMeDQ26EDhlf9MMMMMMMMeffeQ2BQ25Q25r9MMeMr8he9fQ2B" height="1" width="3">


			
		<!-- Start UPT call -->
		<img height="1" width="3" border=0 src="http://up.nytimes.com/?d=0//&t=6&s=0&ui=0&r=&u=www%2enytimes%2ecom%2finteractive%2f2012%2f02%2f13%2fus%2fpolitics%2f2013%2dbudget%2dproposal%2dgraphic%2ehtml%3f%5fr%3d1">
		<!-- End UPT call -->
	
		
        <script language="JavaScript"><!--
          var dcsvid="0";
          var regstatus="non-registered";
        //--></script>
        <script src="http://graphics8.nytimes.com/js/app/analytics/trackingTags_v1.1.js" type="text/javascript"></script>
        <noscript>
          <div><img alt="DCSIMG" id="DCSIMG" width="1" height="1" src="http://wt.o.nytimes.com/dcsym57yw10000s1s8g0boozt_9t1x/njs.gif?dcsuri=/nojavascript&amp;WT.js=No&amp;WT.tv=1.0.7"/></div>
        </noscript>
   
</body>
</html>


